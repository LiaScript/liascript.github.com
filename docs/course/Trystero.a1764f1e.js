!function(){var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("lCGwp",(function(t,n){var r,i,a,o;r=t.exports,i="Sync",a=function(){return g},Object.defineProperty(r,i,{get:a,set:o,enumerable:!0,configurable:!0});var s=e("hnmIs"),u=e("9Klpk"),c=e("3bWnf"),d=e("9WzNc"),l=e("div3d"),f=e("kb0qF"),b=e("5ENmm"),h=e("bWNdT"),p=e("32Euv"),v=e("auvHb"),m={nostr:null,mqtt:null,torrent:null},g=function(t){"use strict";(0,f.default)(r,t);var n=(0,h.default)(r);function r(e,t,i,a,o){var s,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,u.default)(this,r),(s=n.call(this,t,i,a,o,c,d)).backend=e,s}return(0,c.default)(r,[{key:"destroy",value:function(){this.connection&&this.connection.leave(),(0,d.default)((0,l.default)(r.prototype),"destroy",this).call(this)}},{key:"connect",value:function(t){var n=this,i=this;return(0,s.default)((function(){return(0,p.__generator)(this,(function(a){if((0,d.default)((0,l.default)(r.prototype),"connect",n).call(i,t),m[i.backend])return i.init(!0),[2];switch(i.backend){case"nostr":e("5ZdQa").then((function(e){m.nostr=e.joinRoom,i.init(!0)})).catch((function(e){i.init(!1,e.message)}));break;case"mqtt":e("8G6Vu").then((function(e){m.mqtt=e.joinRoom,i.init(!0)})).catch((function(e){i.init(!1,e.message)}));break;case"torrent":e("kEbLv").then((function(e){m.torrent=e.joinRoom,i.init(!0)})).catch((function(e){i.init(!1,e.message)}))}return[2]}))}))()}},{key:"init",value:function(e,t){var n=this.uniqueID();if(e&&n){var r={appId:"liascript"};this.password&&(r.password=this.password);var i=JSON.parse('{"iceServers":[{"urls":"stun:stun.relay.metered.ca:80"},{"urls":"turn:standard.relay.metered.ca:80","username":"1d901429597d3b1332b481d2","credential":"9eGxvnGUtRfCt6/N"},{"urls":"turn:standard.relay.metered.ca:80?transport=tcp","username":"1d901429597d3b1332b481d2","credential":"9eGxvnGUtRfCt6/N"},{"urls":"turn:standard.relay.metered.ca:443","username":"1d901429597d3b1332b481d2","credential":"9eGxvnGUtRfCt6/N"},{"urls":"turns:standard.relay.metered.ca:443?transport=tcp","username":"1d901429597d3b1332b481d2","credential":"9eGxvnGUtRfCt6/N"}]}');i&&(r.rtcConfig=i),this.connection=m[this.backend](r,n),this.connection.onPeerJoin((function(e){return console.log("".concat(e," joined"))})),this.connection.onPeerLeave((function(e){return console.log("".concat(e," left"))}));var a=(0,b.default)(this.connection.makeAction("message"),2),o=a[0],s=a[1];this.pub=o,this.sub=s;var u=this;this.sub((function(e,t){if(e)try{var n=(0,b.default)(e,3),r=n[0],i=n[1],a=n[2];if(r){if(null===i)return;a==u.db.timestamp?u.applyUpdate(v.base64_to_unit8(i)):a>u.db.timestamp?u.broadcast(!0,u.db.encode()):(u.db.timestamp=a,u.applyUpdate(v.base64_to_unit8(i),!0))}else u.pubsubReceive(v.base64_to_unit8(i))}catch(e){console.warn(u.backend,e.message)}})),this.sendConnect()}else{var c=this.backend+" unknown error";t&&(c="Could not load resource: "+t),this.sendDisconnectError(c)}}},{key:"broadcast",value:function(e,t){if(this.publish){var n=null==t?null:v.uint8_to_base64(t);this.pub([e,n,this.db.timestamp])}}}]),r}(v.Sync)})),e.register("5ZdQa",(function(t,n){t.exports=e("3OMJO")(e("5B9gS").getBundleURL("bFNS0")+e("b9xd4").resolve("6gAOH")).then((function(){return e("1UDrq")}))})),e.register("8G6Vu",(function(t,n){t.exports=e("3OMJO")(e("5B9gS").getBundleURL("bFNS0")+e("b9xd4").resolve("7U1md")).then((function(){return e("aB40U")}))})),e.register("kEbLv",(function(t,n){t.exports=e("3OMJO")(e("5B9gS").getBundleURL("bFNS0")+e("b9xd4").resolve("jnhCd")).then((function(){return e("E0fFs")}))}))}();