!function(e,t,n,r,i){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},u="function"==typeof o[r]&&o[r],c=u.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(t,n){if(!c[t]){if(!e[t]){var i="function"==typeof o[r]&&o[r];if(!n&&i)return i(t,!0);if(u)return u(t,!0);if(a&&"string"==typeof t)return a(t);var l=Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}h.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},h.cache={};var f=c[t]=new s.Module(t);e[t][0].call(f.exports,h,f,f.exports,this)}return c[t].exports;function h(e){var t=h.resolve(e);return!1===t?{}:s(t)}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=c,s.parent=u,s.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(s,"root",{get:function(){return o[r]}}),o[r]=s;for(var l=0;l<t.length;l++)s(t[l])}({eIgRj:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"_get",(function(){return o})),r.export(n,"_",(function(){return o}));var i=e("./_super_prop_base.js");function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=(0,i._super_prop_base)(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}},{"./_super_prop_base.js":"cPOex","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],cPOex:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"_super_prop_base",(function(){return o})),r.export(n,"_",(function(){return o}));var i=e("./_get_prototype_of.js");function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,i._get_prototype_of)(e)););return e}},{"./_get_prototype_of.js":"cFXpH","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"5ZLLr":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"uint8_to_base64",(function(){return s})),r.export(n,"base64_to_unit8",(function(){return l})),r.export(n,"Sync",(function(){return h}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=e("../../helper"),c=e("./db"),a=e("uint8-to-base64");function s(e){return(0,a.encode)(e)}function l(e){return(0,a.decode)(e)}function f(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var h=function(){function e(t,n){var r,o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=this;(0,i._)(this,e),this.isConnected=!1;try{(r=window.localStorage.getItem("lia-token"))||(r=f(),window.localStorage.setItem("lia-token",r))}catch(e){console.warn("cannot write to localStorage"),r=f()}this.token=r,this.urlCounter=0,this.cbConnection=t,this.cbRelay=n;var s=this,l=function(e){var t=function(){return 200*(e.db.getPeers().length+1)+2e3},n=null;function r(){if(e.isConnected)try{e.broadcast(e.db.encode()),n=window.setTimeout(r,t())}catch(e){n=null}}return function(){n&&window.clearTimeout(n),n=window.setTimeout(r,t())}}(s);this.gossip=l;var h=u.throttle((function(){s.broadcast(s.db.encode()),l()}),1e3);this.db=new c.CRDT(r,o?function(e,t){if(s.db){switch(t){case"cursor":a.sync("update",{cmd:"cursor",param:e});break;case"peer":a.sync("update",{cmd:"peer",param:e});break;case"code":a.sync("update",{cmd:"code",param:e});break;case"quiz":a.sync("update",{cmd:"quiz",param:e});break;case"survey":a.sync("update",{cmd:"survey",param:e});break;case"chat":a.sync("update",{cmd:"chat",param:e});break;case"exit":try{t=null,a.broadcast(e),a.destroy()}catch(e){}break;default:console.warn("Sync unknown origin",t)}t&&h()}}:void 0)}return(0,o._)(e,[{key:"connect",value:function(e){this.room=e.room,this.course=e.course,this.password=e.password,this.isConnected=!0}},{key:"destroy",value:function(){this.db.destroy(),this.cbConnection("disconnect",this.token),this.isConnected=!1}},{key:"disconnect",value:function(){this.db.removePeer()}},{key:"uniqueID",value:function(){return"string"==typeof this.room&&(this.room.startsWith('"')&&this.room.endsWith('"')||this.room.startsWith("'")&&this.room.endsWith("'"))?this.room:this.course&&this.room?JSON.stringify({course:this.course,room:this.room,pw:u.getHashCode(this.password||"")}):(console.warn("Sync: no uniqueID"),null)}},{key:"sendToLia",value:function(e){this.cbRelay(e)}},{key:"sync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cbConnection(e,t)}},{key:"sendDisconnectError",value:function(e){this.sync("error",e)}},{key:"sendConnect",value:function(){this.sync("connect",this.token)}},{key:"broadcast",value:function(e){console.warn("broadcast needs to be implemented")}},{key:"load",value:function(e,t){try{for(var n=this,r=0;r<e.length;r++)!function(r){var i=document.createElement("script");i.async=!1,i.defer=!0,i.src=e[r],n.urlCounter++,i.onload=function(){console.log("successfully loaded =>",e),n.urlCounter--,0==n.urlCounter&&t.init(!0)},i.onerror=function(r){console.warn("could not load =>",e,r),n.urlCounter=0,t.init(!1,"could not load => ".concat(e))},document.head.appendChild(i)}(r)}catch(e){console.error("load: ",e),t.init(!1,e.message)}}},{key:"publish",value:function(e){switch(e.message.cmd){case"update":break;case"join":this.db.init(e.message.param),this.gossip();break;case"chat":this.db.addChatMessage(e.message.param);break;case"quiz":"quiz"===(null===(t=e.track)||void 0===t?void 0:t[0][0])&&"id"===(null===(n=e.track)||void 0===n?void 0:n[1][0])?this.db.addQuiz(e.track[0][1],e.track[1][1],e.message.param):console.warn("SyncTX wrong event ->",e);break;case"survey":"survey"===(null===(r=e.track)||void 0===r?void 0:r[0][0])&&"id"===(null===(i=e.track)||void 0===i?void 0:i[1][0])?this.db.addSurvey(e.track[0][1],e.track[1][1],e.message.param):console.warn("SyncTX wrong event ->",e);break;case"code":"code"===(null===(o=e.track)||void 0===o?void 0:o[0][0])&&"id"===(null===(u=e.track)||void 0===u?void 0:u[1][0])?this.db.updateCode(e.track[0][1],e.track[1][1],e.message.param.j,e.message.param.msg):console.warn("SyncTX wrong event ->",e);break;case"codes":if("code"===(null===(c=e.track)||void 0===c?void 0:c[0][0])&&1===e.track.length)for(var t,n,r,i,o,u,c,a,s=0;s<e.message.param.length;s++)for(var l=0;l<e.message.param[s].length;l++)this.db.initCode(e.track[0][1],s,l,e.message.param[s][l]);else console.warn("SyncTX wrong event ->",e);break;case"cursor":"code"==(null===(a=e.track)||void 0===a?void 0:a[0][0])&&this.db.setCursor(e.track[0][1],e.message.param);break;default:console.warn("SyncTX unknown command:",e.message)}}},{key:"applyUpdate",value:function(e){this.db.applyUpdate(e)}}]),e}()},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","../../helper":"16SFj","./db":"7dBMQ","uint8-to-base64":"9J4dR","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"7dBMQ":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"CRDT",(function(){return f}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=e("@swc/helpers/_/_object_spread"),c=e("@swc/helpers/_/_sliced_to_array"),a=e("yjs"),s=e("../../helper"),l=e("y-utility/y-keyvalue"),f=function(){function e(t,n){var r=this;(0,i._)(this,e),this.doc=new a.Doc,this.callback=n||function(e,t){console.warn("SyncDB: no callback provided")},this.length=0,this.peerID=t,this.peers=this.doc.getMap("peers"),this.cursors=this.doc.getMap("cursors"),this.codes=this.doc.getMap("c"),this.quizzes=new l.YKeyValue(this.doc.getArray("q")),this.surveys=new l.YKeyValue(this.doc.getArray("s")),this.chat=new l.YKeyValue(this.doc.getArray("chat")),n&&(this.peers.observe((function(e){n(r.getPeers(),"peer")})),this.cursors.observe((function(e){var t=r.getPeers();n(r.getCursors(t),"cursor")})),this.quizzes.on("change",(function(e){var t=r.getUpdates(r.quizzes,e);t&&n(t,"quiz")})),this.surveys.on("change",(function(e){var t=r.getUpdates(r.surveys,e);t&&n(t,"survey")})),this.chat.on("change",(function(e){var t=[],r=!0,i=!1,o=void 0;try{for(var u,a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=(0,c._)(a.value,2),f=l[0],h=l[1];"add"===h.action&&((u=h.newValue).id=parseInt(f),t.push(u))}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}t.length>0&&n(t,"chat")})),this.codes.observeDeep((function(e){var t=new Set,i=!0,o=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value.currentTarget.keys(),f=!0,h=!1,d=void 0;try{for(var p,v=l[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;try{var y=(0,c._)(JSON.parse(g),1)[0];t.add(y)}catch(e){}}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}}catch(e){o=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw u}}t.size>0&&n(r.getCode(t),"code")}))),this.peers.set(t,!0)}return(0,o._)(e,[{key:"init",value:function(e){var t=this;this.length=Math.max(this.length,e.length);var n=this;this.doc.transact((function(){for(var r=0;r<e.length;r++)n.initMap(t.quizzes,r,e[r].q),n.initMap(t.surveys,r,e[r].s),n.initText(r,e[r].c)}),this.peerID)}},{key:"encode",value:function(){return a.encodeStateAsUpdate(this.doc)}},{key:"destroy",value:function(){this.doc.destroy()}},{key:"applyUpdate",value:function(e){var t=this;this.doc.transact((function(){!1===t.peers.get(t.peerID)&&t.peers.set(t.peerID,!0),a.applyUpdate(t.doc,e)}))}},{key:"log",value:function(){console.warn("*********** PEERS ***********"),console.warn(this.peers.toJSON()),console.warn("*********** STATE ***********"),console.warn(this.doc.toJSON())}},{key:"initMap",value:function(e,t,n){if(0!==n.length)for(var r,i=0;i<n.length;i++){for(var o in(r=e.get(this.id(t,i)))||(r={}),n[i])r[o]=n[i][o];e.set(this.id(t,i),r)}}},{key:"initText",value:function(e,t){if(0!==t.length)for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)this.initCode(e,n,r,t[n][r])}},{key:"diff",value:function(e){return a.encodeStateAsUpdate(this.doc,e)}},{key:"getCode",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;t.push({id:c,data:this.getAllTexts(c)})}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t}},{key:"getCursors",value:function(e){var t=[],n=this.cursors.toJSON(),r=!0,i=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var a=u.value;a!==this.peerID&&void 0!==n[a]&&t.push(n[a])}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}},{key:"getPeers",value:function(){var e=this.peers.toJSON();return e?Object.entries(e).filter((function(e){var t=(0,c._)(e,2);return t[0],t[1]})).map((function(e){var t=(0,c._)(e,2),n=t[0];return t[1],n})):[]}},{key:"removePeer",value:function(e){var t=this;this.doc.transact((function(){t.peers.set(e||t.peerID,!1)})),void 0===e&&this.callback(this.encode(),"exit")}},{key:"id",value:function(e,t,n){return void 0===n?JSON.stringify([e,t]):JSON.stringify([e,t,n])}},{key:"getMap",value:function(e,t,n){return this.doc.getMap(this.id(t,n))}},{key:"getAllMaps",value:function(e){for(var t=[],n=0;n<this.length;n++){for(var r=[],i=0;e.has(this.id(n,i));i++)r.push(e.get(this.id(n,i)));t.push(r)}return t}},{key:"getMaps",value:function(e,t){for(var n=[],r=0;t.has(this.id(e,r));r++)n.push(t.get(this.id(e,r)));return n}},{key:"getAllTexts",value:function(e){for(var t,n=[],r=0;this.codes.has(this.id(e,r,0));r++){for(var i=[],o=0;this.codes.has(this.id(e,r,o));o++)t=this.codes.get(this.id(e,r,o)),i.push((null==t?void 0:t.toString())||"");n.push(i)}return n}},{key:"addQuiz",value:function(e,t,n){this.addRecord(this.quizzes,e,t,n)}},{key:"addSurvey",value:function(e,t,n){this.addRecord(this.surveys,e,t,n)}},{key:"addRecord",value:function(e,t,n,r){var i=e.get(this.id(t,n));i||(i={}),i[this.peerID]=r,e.set(this.id(t,n),i)}},{key:"initCode",value:function(e,t,n,r){if(!this.codes.has(this.id(e,t,n))){var i=this.doc.clientID;this.doc.clientID=0;var o=new a.Text;o.insert(0,r),this.codes.set(this.id(e,t,n),o),this.doc.clientID=i}}},{key:"addChatMessage",value:function(e){this.chat.set(""+Date.now(),{color:this.getColor(),message:e,user:this.peerID})}},{key:"updateCode",value:function(e,t,n,r){var i=this;this.codes.has(this.id(e,t,n))&&this.doc.transact((function(){var o=i.codes.get(i.id(e,t,n));if(void 0!==o){var u=!0,c=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(u=(s=l.next()).done);u=!0){var f=s.value;switch(f.action){case"insert":o.insert(f.index,f.content);break;case"remove":o.delete(f.index,f.content.length);break;default:console.warn("Sync code, unknown action ->",f)}}}catch(e){c=!0,a=e}finally{try{u||null==l.return||l.return()}finally{if(c)throw a}}}}),"code")}},{key:"getColor",value:function(){return this.color||(this.color=s.getColorFor(this.peerID)),this.color}},{key:"setCursor",value:function(e,t){var n=this;this.doc.transact((function(){n.cursors.set(n.peerID,{id:n.peerID,section:e,project:t.project,file:t.file,state:t.state,color:n.getColor()})}),"cursor")}},{key:"removeCursor",value:function(){this.cursors.delete(this.peerID)}},{key:"getUpdates",value:function(e,t){var n=new Set,r=[],i=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=(0,c._)(s.value,2),h=f[0],d=f[1];switch(d.action){case"update":if(JSON.stringify(Object.keys(d.oldValue).sort())!==JSON.stringify(Object.keys(d.newValue).sort())){r.push([h,(0,u._)({},d.oldValue,d.newValue)]);continue}case"add":try{var p=(0,c._)(JSON.parse(h),1)[0];n.add(p)}catch(e){}}}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}var v=[],g=!0,y=!1,_=void 0;try{for(var m,k=n[Symbol.iterator]();!(g=(m=k.next()).done);g=!0){var w=m.value;v.push({id:w,data:this.getMaps(w,e)})}}catch(e){y=!0,_=e}finally{try{g||null==k.return||k.return()}finally{if(y)throw _}}var x=!0,b=!1,S=void 0;try{for(var E,I=r[Symbol.iterator]();!(x=(E=I.next()).done);x=!0){var U=(0,c._)(E.value,2),j=U[0],T=U[1];e.set(j,T)}}catch(e){b=!0,S=e}finally{try{x||null==I.return||I.return()}finally{if(b)throw S}}return v.length>0?v:null}}]),e}()},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_object_spread":"2BmK3","@swc/helpers/_/_sliced_to_array":"gC503",yjs:"i4JQM","../../helper":"16SFj","y-utility/y-keyvalue":"9T12E","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],i4JQM:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"AbsolutePosition",(function(){return Me})),r.export(n,"AbstractConnector",(function(){return V})),r.export(n,"AbstractStruct",(function(){return Qn})),r.export(n,"AbstractType",(function(){return cn})),r.export(n,"Array",(function(){return In})),r.export(n,"ContentAny",(function(){return ur})),r.export(n,"ContentBinary",(function(){return $n})),r.export(n,"ContentDeleted",(function(){return er})),r.export(n,"ContentEmbed",(function(){return rr})),r.export(n,"ContentFormat",(function(){return ir})),r.export(n,"ContentJSON",(function(){return or})),r.export(n,"ContentString",(function(){return cr})),r.export(n,"ContentType",(function(){return gr})),r.export(n,"Doc",(function(){return Q})),r.export(n,"GC",(function(){return Zn})),r.export(n,"ID",(function(){return Ee})),r.export(n,"Item",(function(){return xr})),r.export(n,"Map",(function(){return jn})),r.export(n,"PermanentUserData",(function(){return Ne})),r.export(n,"RelativePosition",(function(){return Oe})),r.export(n,"Snapshot",(function(){return Je})),r.export(n,"Text",(function(){return Jn})),r.export(n,"Transaction",(function(){return dt})),r.export(n,"UndoManager",(function(){return Et})),r.export(n,"UpdateEncoderV1",(function(){return re})),r.export(n,"XmlElement",(function(){return Xn})),r.export(n,"XmlFragment",(function(){return Hn})),r.export(n,"XmlHook",(function(){return Yn})),r.export(n,"XmlText",(function(){return Wn})),r.export(n,"YArrayEvent",(function(){return En})),r.export(n,"YEvent",(function(){return Qt})),r.export(n,"YMapEvent",(function(){return Un})),r.export(n,"YTextEvent",(function(){return qn})),r.export(n,"YXmlEvent",(function(){return Kn})),r.export(n,"applyUpdate",(function(){return he})),r.export(n,"applyUpdateV2",(function(){return fe})),r.export(n,"cleanupYTextFormatting",(function(){return Ln})),r.export(n,"compareIDs",(function(){return Ie})),r.export(n,"compareRelativePositions",(function(){return qe})),r.export(n,"convertUpdateFormatV1ToV2",(function(){return Kt})),r.export(n,"convertUpdateFormatV2ToV1",(function(){return Yt})),r.export(n,"createAbsolutePositionFromRelativePosition",(function(){return ze})),r.export(n,"createDeleteSet",(function(){return J})),r.export(n,"createDeleteSetFromStructStore",(function(){return G})),r.export(n,"createDocFromSnapshot",(function(){return tt})),r.export(n,"createID",(function(){return Ue})),r.export(n,"createRelativePositionFromJSON",(function(){return Ve})),r.export(n,"createRelativePositionFromTypeIndex",(function(){return Fe})),r.export(n,"createSnapshot",(function(){return We})),r.export(n,"decodeRelativePosition",(function(){return Pe})),r.export(n,"decodeSnapshot",(function(){return Ye})),r.export(n,"decodeSnapshotV2",(function(){return Ke})),r.export(n,"decodeStateVector",(function(){return ye})),r.export(n,"decodeUpdate",(function(){return Tt})),r.export(n,"decodeUpdateV2",(function(){return Ct})),r.export(n,"diffUpdate",(function(){return Lt})),r.export(n,"diffUpdateV2",(function(){return Ft})),r.export(n,"emptySnapshot",(function(){return Qe})),r.export(n,"encodeRelativePosition",(function(){return Le})),r.export(n,"encodeSnapshot",(function(){return Xe})),r.export(n,"encodeSnapshotV2",(function(){return He})),r.export(n,"encodeStateAsUpdate",(function(){return ve})),r.export(n,"encodeStateAsUpdateV2",(function(){return pe})),r.export(n,"encodeStateVector",(function(){return me})),r.export(n,"encodeStateVectorFromUpdate",(function(){return Ot})),r.export(n,"encodeStateVectorFromUpdateV2",(function(){return Nt})),r.export(n,"equalDeleteSets",(function(){return Y})),r.export(n,"equalSnapshots",(function(){return Ge})),r.export(n,"findIndexSS",(function(){return ct})),r.export(n,"findRootTypeKey",(function(){return Ce})),r.export(n,"getItem",(function(){return at})),r.export(n,"getState",(function(){return ot})),r.export(n,"getTypeChildren",(function(){return on})),r.export(n,"isDeleted",(function(){return L})),r.export(n,"isParentOf",(function(){return De})),r.export(n,"iterateDeletedStructs",(function(){return F})),r.export(n,"logType",(function(){return Ae})),r.export(n,"logUpdate",(function(){return Ut})),r.export(n,"logUpdateV2",(function(){return jt})),r.export(n,"mergeUpdates",(function(){return At})),r.export(n,"mergeUpdatesV2",(function(){return Rt})),r.export(n,"obfuscateUpdate",(function(){return Ht})),r.export(n,"obfuscateUpdateV2",(function(){return Xt})),r.export(n,"parseUpdateMeta",(function(){return Vt})),r.export(n,"parseUpdateMetaV2",(function(){return Bt})),r.export(n,"readUpdate",(function(){return le})),r.export(n,"readUpdateV2",(function(){return se})),r.export(n,"relativePositionToJSON",(function(){return Be})),r.export(n,"snapshot",(function(){return Ze})),r.export(n,"snapshotContainsUpdate",(function(){return nt})),r.export(n,"transact",(function(){return wt})),r.export(n,"tryGc",(function(){return mt})),r.export(n,"typeListToArraySnapshot",(function(){return ln})),r.export(n,"typeMapGetSnapshot",(function(){return bn}));var i=e("@swc/helpers/_/_assert_this_initialized"),o=e("@swc/helpers/_/_class_call_check"),u=e("@swc/helpers/_/_create_class"),c=e("@swc/helpers/_/_define_property"),a=e("@swc/helpers/_/_get"),s=e("@swc/helpers/_/_get_prototype_of"),l=e("@swc/helpers/_/_inherits"),f=e("@swc/helpers/_/_object_spread"),h=e("@swc/helpers/_/_object_spread_props"),d=e("@swc/helpers/_/_sliced_to_array"),p=e("@swc/helpers/_/_to_consumable_array"),v=e("@swc/helpers/_/_create_super"),g=e("@swc/helpers/_/_ts_generator"),y=e("lib0/observable"),_=e("lib0/array"),m=e("lib0/math"),k=e("lib0/map"),w=e("lib0/encoding"),x=e("lib0/decoding"),b=e("lib0/random"),S=e("lib0/promise"),E=e("lib0/buffer"),I=e("lib0/error"),U=e("lib0/binary"),j=e("lib0/function"),T=e("lib0/set"),C=e("lib0/logging"),D=e("lib0/time"),A=e("lib0/string"),N=e("lib0/iterator"),O=e("lib0/object"),B=arguments[3],V=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this)).doc=e,i.awareness=r,i}return n}(y.Observable),M=function e(t,n){(0,o._)(this,e),this.clock=t,this.len=n},R=function e(){(0,o._)(this,e),this.clients=new Map},F=function(e,t,n){return t.clients.forEach((function(t,r){for(var i=e.doc.store.clients.get(r),o=0;o<t.length;o++){var u=t[o];ht(e,i,u.clock,u.len,n)}}))},L=function(e,t){var n=e.clients.get(t.client);return void 0!==n&&null!==function(e,t){for(var n=0,r=e.length-1;n<=r;){var i=m.floor((n+r)/2),o=e[i],u=o.clock;if(u<=t){if(t<u+o.len)return i;n=i+1}else r=i-1}return null}(n,t.clock)},P=function(e){e.clients.forEach((function(e){for(e.sort((function(e,t){return e.clock-t.clock})),t=1,n=1;t<e.length;t++){var t,n,r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=m.max(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n}))},z=function(e){for(var t=function(t){e[t].clients.forEach((function(r,i){if(!n.clients.has(i)){for(var o=r.slice(),u=t+1;u<e.length;u++)_.appendTo(o,e[u].clients.get(i)||[]);n.clients.set(i,o)}}))},n=new R,r=0;r<e.length;r++)t(r);return P(n),n},q=function(e,t,n,r){k.setIfUndefined(e.clients,t,(function(){return[]})).push(new M(n,r))},J=function(){return new R},G=function(e){var t=J();return e.clients.forEach((function(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];if(o.deleted){var u=o.id.clock,c=o.length;if(i+1<e.length)for(var a=e[i+1];i+1<e.length&&a.deleted;a=e[1+ ++i])c+=a.length;r.push(new M(u,c))}}r.length>0&&t.clients.set(n,r)})),t},H=function(e,t){w.writeVarUint(e.restEncoder,t.clients.size),_.from(t.clients.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=(0,d._)(t,2),r=n[0],i=n[1];e.resetDsCurVal(),w.writeVarUint(e.restEncoder,r);var o=i.length;w.writeVarUint(e.restEncoder,o);for(var u=0;u<o;u++){var c=i[u];e.writeDsClock(c.clock),e.writeDsLen(c.len)}}))},X=function(e){for(var t=new R,n=x.readVarUint(e.restDecoder),r=0;r<n;r++)!function(n){e.resetDsCurVal();var r=x.readVarUint(e.restDecoder),i=x.readVarUint(e.restDecoder);if(i>0)for(var o=k.setIfUndefined(t.clients,r,(function(){return[]})),u=0;u<i;u++)o.push(new M(e.readDsClock(),e.readDsLen()))}();return t},K=function(e,t,n){for(var r=new R,i=x.readVarUint(e.restDecoder),o=0;o<i;o++){e.resetDsCurVal();for(var u=x.readVarUint(e.restDecoder),c=x.readVarUint(e.restDecoder),a=n.clients.get(u)||[],s=ot(n,u),l=0;l<c;l++){var f=e.readDsClock(),h=f+e.readDsLen();if(f<s){s<h&&q(r,u,s,h-s);var d=ct(a,f),p=a[d];for(!p.deleted&&p.id.clock<f&&(a.splice(d+1,0,mr(t,p,f-p.id.clock)),d++);d<a.length&&(p=a[d++]).id.clock<h;)p.deleted||(h<p.id.clock+p.length&&a.splice(d,0,mr(t,p,h-p.id.clock)),p.delete(t))}else q(r,u,f,h-f)}}if(r.clients.size>0){var v=new oe;return w.writeVarUint(v.restEncoder,0),H(v,r),v.toUint8Array()}return null},Y=function(e,t){if(e.clients.size!==t.clients.size)return!1;var n=!0,r=!1,i=void 0;try{for(var o,u=e.clients.entries()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=(0,d._)(o.value,2),a=c[0],s=c[1],l=t.clients.get(a);if(void 0===l||s.length!==l.length)return!1;for(var f=0;f<s.length;f++){var h=s[f],p=l[f];if(h.clock!==p.clock||h.len!==p.len)return!1}}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return!0},W=b.uint32,Q=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=r.guid,c=void 0===u?b.uuidv4():u,a=r.collectionid,s=r.gc,l=r.gcFilter,f=r.meta,h=r.autoLoad,d=r.shouldLoad;(0,o._)(this,n),(e=t.call(this)).gc=void 0===s||s,e.gcFilter=void 0===l?function(){return!0}:l,e.clientID=W(),e.guid=c,e.collectionid=void 0===a?null:a,e.share=new Map,e.store=new rt,e._transaction=null,e._transactionCleanups=[],e.subdocs=new Set,e._item=null,e.shouldLoad=void 0===d||d,e.autoLoad=void 0!==h&&h,e.meta=void 0===f?null:f,e.isLoaded=!1,e.isSynced=!1,e.whenLoaded=S.create((function(t){e.on("load",(function(){e.isLoaded=!0,t((0,i._)(e))}))}));var p=function(){return S.create((function(t){var n=function(r){(void 0===r||!0===r)&&(e.off("sync",n),t())};e.on("sync",n)}))};return e.on("sync",(function(t){!1===t&&e.isSynced&&(e.whenSynced=p()),e.isSynced=void 0===t||!0===t,e.isLoaded||e.emit("load",[])})),e.whenSynced=p(),e}return(0,u._)(n,[{key:"load",value:function(){var e=this,t=this._item;null===t||this.shouldLoad||wt(t.parent.doc,(function(t){t.subdocsLoaded.add(e)}),null,!0),this.shouldLoad=!0}},{key:"getSubdocs",value:function(){return this.subdocs}},{key:"getSubdocGuids",value:function(){return new Set(_.from(this.subdocs).map((function(e){return e.guid})))}},{key:"transact",value:function(e){return wt(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn,n=this,r=k.setIfUndefined(this.share,e,(function(){var e=new t;return e._integrate(n,null),e})),i=r.constructor;if(t!==cn&&i!==t){if(i===cn){var o=new t;o._map=r._map,r._map.forEach((function(e){for(;null!==e;e=e.left)e.parent=o})),o._start=r._start;for(var u=o._start;null!==u;u=u.right)u.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}throw Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return r}},{key:"getArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,In)}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Jn)}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,jn)}},{key:"getXmlFragment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Hn)}},{key:"toJSON",value:function(){var e={};return this.share.forEach((function(t,n){e[n]=t.toJSON()})),e}},{key:"destroy",value:function(){var e=this;_.from(this.subdocs).forEach((function(e){return e.destroy()}));var t=this._item;if(null!==t){this._item=null;var r=t.content;r.doc=new n((0,h._)((0,f._)({guid:this.guid},r.opts),{shouldLoad:!1})),r.doc._item=t,wt(t.parent.doc,(function(n){var i=r.doc;t.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(e)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),(0,a._)((0,s._)(n.prototype),"destroy",this).call(this)}},{key:"on",value:function(e,t){(0,a._)((0,s._)(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){(0,a._)((0,s._)(n.prototype),"off",this).call(this,e,t)}}]),n}(y.Observable),Z=function(){function e(t){(0,o._)(this,e),this.restDecoder=t}return(0,u._)(e,[{key:"resetDsCurVal",value:function(){}},{key:"readDsClock",value:function(){return x.readVarUint(this.restDecoder)}},{key:"readDsLen",value:function(){return x.readVarUint(this.restDecoder)}}]),e}(),$=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,u._)(n,[{key:"readLeftID",value:function(){return Ue(x.readVarUint(this.restDecoder),x.readVarUint(this.restDecoder))}},{key:"readRightID",value:function(){return Ue(x.readVarUint(this.restDecoder),x.readVarUint(this.restDecoder))}},{key:"readClient",value:function(){return x.readVarUint(this.restDecoder)}},{key:"readInfo",value:function(){return x.readUint8(this.restDecoder)}},{key:"readString",value:function(){return x.readVarString(this.restDecoder)}},{key:"readParentInfo",value:function(){return 1===x.readVarUint(this.restDecoder)}},{key:"readTypeRef",value:function(){return x.readVarUint(this.restDecoder)}},{key:"readLen",value:function(){return x.readVarUint(this.restDecoder)}},{key:"readAny",value:function(){return x.readAny(this.restDecoder)}},{key:"readBuf",value:function(){return E.copyUint8Array(x.readVarUint8Array(this.restDecoder))}},{key:"readJSON",value:function(){return JSON.parse(x.readVarString(this.restDecoder))}},{key:"readKey",value:function(){return x.readVarString(this.restDecoder)}}]),n}(Z),ee=function(){function e(t){(0,o._)(this,e),this.dsCurrVal=0,this.restDecoder=t}return(0,u._)(e,[{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"readDsClock",value:function(){return this.dsCurrVal+=x.readVarUint(this.restDecoder),this.dsCurrVal}},{key:"readDsLen",value:function(){var e=x.readVarUint(this.restDecoder)+1;return this.dsCurrVal+=e,e}}]),e}(),te=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e){var r;return(0,o._)(this,n),(r=t.call(this,e)).keys=[],x.readVarUint(e),r.keyClockDecoder=new x.IntDiffOptRleDecoder(x.readVarUint8Array(e)),r.clientDecoder=new x.UintOptRleDecoder(x.readVarUint8Array(e)),r.leftClockDecoder=new x.IntDiffOptRleDecoder(x.readVarUint8Array(e)),r.rightClockDecoder=new x.IntDiffOptRleDecoder(x.readVarUint8Array(e)),r.infoDecoder=new x.RleDecoder(x.readVarUint8Array(e),x.readUint8),r.stringDecoder=new x.StringDecoder(x.readVarUint8Array(e)),r.parentInfoDecoder=new x.RleDecoder(x.readVarUint8Array(e),x.readUint8),r.typeRefDecoder=new x.UintOptRleDecoder(x.readVarUint8Array(e)),r.lenDecoder=new x.UintOptRleDecoder(x.readVarUint8Array(e)),r}return(0,u._)(n,[{key:"readLeftID",value:function(){return new Ee(this.clientDecoder.read(),this.leftClockDecoder.read())}},{key:"readRightID",value:function(){return new Ee(this.clientDecoder.read(),this.rightClockDecoder.read())}},{key:"readClient",value:function(){return this.clientDecoder.read()}},{key:"readInfo",value:function(){return this.infoDecoder.read()}},{key:"readString",value:function(){return this.stringDecoder.read()}},{key:"readParentInfo",value:function(){return 1===this.parentInfoDecoder.read()}},{key:"readTypeRef",value:function(){return this.typeRefDecoder.read()}},{key:"readLen",value:function(){return this.lenDecoder.read()}},{key:"readAny",value:function(){return x.readAny(this.restDecoder)}},{key:"readBuf",value:function(){return x.readVarUint8Array(this.restDecoder)}},{key:"readJSON",value:function(){return x.readAny(this.restDecoder)}},{key:"readKey",value:function(){var e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];var t=this.stringDecoder.read();return this.keys.push(t),t}}]),n}(ee),ne=function(){function e(){(0,o._)(this,e),this.restEncoder=w.createEncoder()}return(0,u._)(e,[{key:"toUint8Array",value:function(){return w.toUint8Array(this.restEncoder)}},{key:"resetDsCurVal",value:function(){}},{key:"writeDsClock",value:function(e){w.writeVarUint(this.restEncoder,e)}},{key:"writeDsLen",value:function(e){w.writeVarUint(this.restEncoder,e)}}]),e}(),re=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,u._)(n,[{key:"writeLeftID",value:function(e){w.writeVarUint(this.restEncoder,e.client),w.writeVarUint(this.restEncoder,e.clock)}},{key:"writeRightID",value:function(e){w.writeVarUint(this.restEncoder,e.client),w.writeVarUint(this.restEncoder,e.clock)}},{key:"writeClient",value:function(e){w.writeVarUint(this.restEncoder,e)}},{key:"writeInfo",value:function(e){w.writeUint8(this.restEncoder,e)}},{key:"writeString",value:function(e){w.writeVarString(this.restEncoder,e)}},{key:"writeParentInfo",value:function(e){w.writeVarUint(this.restEncoder,e?1:0)}},{key:"writeTypeRef",value:function(e){w.writeVarUint(this.restEncoder,e)}},{key:"writeLen",value:function(e){w.writeVarUint(this.restEncoder,e)}},{key:"writeAny",value:function(e){w.writeAny(this.restEncoder,e)}},{key:"writeBuf",value:function(e){w.writeVarUint8Array(this.restEncoder,e)}},{key:"writeJSON",value:function(e){w.writeVarString(this.restEncoder,JSON.stringify(e))}},{key:"writeKey",value:function(e){w.writeVarString(this.restEncoder,e)}}]),n}(ne),ie=function(){function e(){(0,o._)(this,e),this.restEncoder=w.createEncoder(),this.dsCurrVal=0}return(0,u._)(e,[{key:"toUint8Array",value:function(){return w.toUint8Array(this.restEncoder)}},{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"writeDsClock",value:function(e){var t=e-this.dsCurrVal;this.dsCurrVal=e,w.writeVarUint(this.restEncoder,t)}},{key:"writeDsLen",value:function(e){0===e&&I.unexpectedCase(),w.writeVarUint(this.restEncoder,e-1),this.dsCurrVal+=e}}]),e}(),oe=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){var e;return(0,o._)(this,n),(e=t.call(this)).keyMap=new Map,e.keyClock=0,e.keyClockEncoder=new w.IntDiffOptRleEncoder,e.clientEncoder=new w.UintOptRleEncoder,e.leftClockEncoder=new w.IntDiffOptRleEncoder,e.rightClockEncoder=new w.IntDiffOptRleEncoder,e.infoEncoder=new w.RleEncoder(w.writeUint8),e.stringEncoder=new w.StringEncoder,e.parentInfoEncoder=new w.RleEncoder(w.writeUint8),e.typeRefEncoder=new w.UintOptRleEncoder,e.lenEncoder=new w.UintOptRleEncoder,e}return(0,u._)(n,[{key:"toUint8Array",value:function(){var e=w.createEncoder();return w.writeVarUint(e,0),w.writeVarUint8Array(e,this.keyClockEncoder.toUint8Array()),w.writeVarUint8Array(e,this.clientEncoder.toUint8Array()),w.writeVarUint8Array(e,this.leftClockEncoder.toUint8Array()),w.writeVarUint8Array(e,this.rightClockEncoder.toUint8Array()),w.writeVarUint8Array(e,w.toUint8Array(this.infoEncoder)),w.writeVarUint8Array(e,this.stringEncoder.toUint8Array()),w.writeVarUint8Array(e,w.toUint8Array(this.parentInfoEncoder)),w.writeVarUint8Array(e,this.typeRefEncoder.toUint8Array()),w.writeVarUint8Array(e,this.lenEncoder.toUint8Array()),w.writeUint8Array(e,w.toUint8Array(this.restEncoder)),w.toUint8Array(e)}},{key:"writeLeftID",value:function(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}},{key:"writeRightID",value:function(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}},{key:"writeClient",value:function(e){this.clientEncoder.write(e)}},{key:"writeInfo",value:function(e){this.infoEncoder.write(e)}},{key:"writeString",value:function(e){this.stringEncoder.write(e)}},{key:"writeParentInfo",value:function(e){this.parentInfoEncoder.write(e?1:0)}},{key:"writeTypeRef",value:function(e){this.typeRefEncoder.write(e)}},{key:"writeLen",value:function(e){this.lenEncoder.write(e)}},{key:"writeAny",value:function(e){w.writeAny(this.restEncoder,e)}},{key:"writeBuf",value:function(e){w.writeVarUint8Array(this.restEncoder,e)}},{key:"writeJSON",value:function(e){w.writeAny(this.restEncoder,e)}},{key:"writeKey",value:function(e){var t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}]),n}(ie),ue=function(e,t,n){var r=new Map;n.forEach((function(e,n){ot(t,n)>e&&r.set(n,e)})),it(t).forEach((function(e,t){n.has(t)||r.set(t,0)})),w.writeVarUint(e.restEncoder,r.size),_.from(r.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(n){var r=(0,d._)(n,2),i=r[0],o=r[1];!function(e,t,n,r){r=m.max(r,t[0].id.clock);var i=ct(t,r);w.writeVarUint(e.restEncoder,t.length-i),e.writeClient(n),w.writeVarUint(e.restEncoder,r);var o=t[i];o.write(e,r-o.id.clock);for(var u=i+1;u<t.length;u++)t[u].write(e,0)}(e,t.clients.get(i),i,o)}))},ce=function(e,t){for(var n=k.create(),r=x.readVarUint(e.restDecoder),i=0;i<r;i++){var o=x.readVarUint(e.restDecoder),u=Array(o),c=e.readClient(),a=x.readVarUint(e.restDecoder);n.set(c,{i:0,refs:u});for(var s=0;s<o;s++){var l=e.readInfo();switch(U.BITS5&l){case 0:var f=e.readLen();u[s]=new Zn(Ue(c,a),f),a+=f;break;case 10:var h=x.readVarUint(e.restDecoder);u[s]=new Er(Ue(c,a),h),a+=h;break;default:var d=0==(l&(U.BIT7|U.BIT8)),p=new xr(Ue(c,a),null,(l&U.BIT8)===U.BIT8?e.readLeftID():null,null,(l&U.BIT7)===U.BIT7?e.readRightID():null,d?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,d&&(l&U.BIT6)===U.BIT6?e.readString():null,br(e,l));u[s]=p,a+=p.length}}}return n},ae=function(e,t,n){var r=[],i=_.from(n.keys()).sort((function(e,t){return e-t}));if(0===i.length)return null;var o=function(){if(0===i.length)return null;for(var e=n.get(i[i.length-1]);e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e},u=o();if(null===u&&0===r.length)return null;for(var c=new rt,a=new Map,s=function(e,t){var n=a.get(e);(null==n||n>t)&&a.set(e,t)},l=u.refs[u.i++],f=new Map,h=function(){var e=!0,t=!1,o=void 0;try{for(var u,a=r[Symbol.iterator]();!(e=(u=a.next()).done);e=!0)!function(){var e=u.value,t=e.id.client,r=n.get(t);r?(r.i--,c.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):c.clients.set(t,[e]),i=i.filter((function(e){return e!==t}))}()}catch(e){t=!0,o=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw o}}r.length=0};;){if(l.constructor!==Er){var d=k.setIfUndefined(f,l.id.client,(function(){return ot(t,l.id.client)}))-l.id.clock;if(d<0)r.push(l),s(l.id.client,l.id.clock-1),h();else{var p=l.getMissing(e,t);if(null!==p){r.push(l);var v=n.get(p)||{refs:[],i:0};if(v.refs.length!==v.i){l=v.refs[v.i++];continue}s(p,ot(t,p)),h()}else(0===d||d<l.length)&&(l.integrate(e,d),f.set(l.id.client,l.id.clock+l.length))}}if(r.length>0)l=r.pop();else if(null!==u&&u.i<u.refs.length)l=u.refs[u.i++];else{if(null===(u=o()))break;l=u.refs[u.i++]}}if(c.clients.size>0){var g=new oe;return ue(g,c,new Map),w.writeVarUint(g.restEncoder,0),{missing:a,update:g.toUint8Array()}}return null},se=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new te(e);return wt(t,(function(e){e.local=!1;var t=!1,n=e.doc,i=n.store,o=ae(e,i,ce(r,n)),u=i.pendingStructs;if(u){var c=!0,a=!1,s=void 0;try{for(var l,f=u.missing[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var h=(0,d._)(l.value,2),p=h[0];if(h[1]<ot(i,p)){t=!0;break}}}catch(e){a=!0,s=e}finally{try{c||null==f.return||f.return()}finally{if(a)throw s}}if(o){var v=!0,g=!1,y=void 0;try{for(var _,m=o.missing[Symbol.iterator]();!(v=(_=m.next()).done);v=!0){var k=(0,d._)(_.value,2),w=k[0],b=k[1],S=u.missing.get(w);(null==S||S>b)&&u.missing.set(w,b)}}catch(e){g=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(g)throw y}}u.update=Rt([u.update,o.update])}}else i.pendingStructs=o;var E=K(r,e,i);if(i.pendingDs){var I=new te(x.createDecoder(i.pendingDs));x.readVarUint(I.restDecoder);var U=K(I,e,i);i.pendingDs=E&&U?Rt([E,U]):E||U}else i.pendingDs=E;if(t){var j=i.pendingStructs.update;i.pendingStructs=null,fe(e.doc,j)}}),n,!1)},le=function(e,t,n){return se(e,t,n,new $(e))},fe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:te,i=x.createDecoder(t);se(i,e,n,new r(i))},he=function(e,t,n){return fe(e,t,n,$)},de=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;ue(e,t.store,n),H(e,G(t.store))},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new oe;de(n,e,ye(t));var r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(Ft(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===re)return At(r.map((function(e,t){return 0===t?e:Yt(e)})));if(n.constructor===oe)return Rt(r)}return r[0]},ve=function(e,t){return pe(e,t,new re)},ge=function(e){for(var t=new Map,n=x.readVarUint(e.restDecoder),r=0;r<n;r++){var i=x.readVarUint(e.restDecoder),o=x.readVarUint(e.restDecoder);t.set(i,o)}return t},ye=function(e){return ge(new Z(x.createDecoder(e)))},_e=function(e,t){return w.writeVarUint(e.restEncoder,t.size),_.from(t.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=(0,d._)(t,2),r=n[0],i=n[1];w.writeVarUint(e.restEncoder,r),w.writeVarUint(e.restEncoder,i)})),e},me=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ie;return e instanceof Map?_e(t,e):_e(t,it(e.store)),t.toUint8Array()}(e,new ne)},ke=function e(){(0,o._)(this,e),this.l=[]},we=function(){return new ke},xe=function(e,t){return e.l.push(t)},be=function(e,t){var n=e.l,r=n.length;e.l=n.filter((function(e){return t!==e})),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Se=function(e,t,n){return j.callAll(e.l,[t,n])},Ee=function e(t,n){(0,o._)(this,e),this.client=t,this.clock=n},Ie=function(e,t){return e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock},Ue=function(e,t){return new Ee(e,t)},je=function(e,t){w.writeVarUint(e,t.client),w.writeVarUint(e,t.clock)},Te=function(e){return Ue(x.readVarUint(e),x.readVarUint(e))},Ce=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.doc.share.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=(0,d._)(i.value,2),c=u[0];if(u[1]===e)return c}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}throw I.unexpectedCase()},De=function(e,t){for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},Ae=function(e){for(var t=[],n=e._start;n;)t.push(n),n=n.right;console.log("Children: ",t),console.log("Children content: ",t.filter((function(e){return!e.deleted})).map((function(e){return e.content})))},Ne=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getMap("users"),r=this;(0,o._)(this,e);var i=new Map;this.yusers=n,this.doc=t,this.clients=new Map,this.dss=i;var u=function(e,t){var n=e.get("ds"),i=e.get("ids"),o=function(e){return r.clients.set(e,t)};n.observe((function(e){e.changes.added.forEach((function(e){e.content.getContent().forEach((function(e){e instanceof Uint8Array&&r.dss.set(t,z([r.dss.get(t)||J(),X(new Z(x.createDecoder(e)))]))}))}))})),r.dss.set(t,z(n.map((function(e){return X(new Z(x.createDecoder(e)))})))),i.observe((function(e){return e.changes.added.forEach((function(e){return e.content.getContent().forEach(o)}))})),i.forEach(o)};n.observe((function(e){e.keysChanged.forEach((function(e){return u(n.get(e),e)}))})),n.forEach(u)}return(0,u._)(e,[{key:"setUserMapping",value:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).filter,i=void 0===r?function(){return!0}:r,o=this,u=this.yusers,c=u.get(n);c||((c=new jn).set("ids",new In),c.set("ds",new In),u.set(n,c)),c.get("ids").push([t]),u.observe((function(e){setTimeout((function(){var e=u.get(n);if(e!==c){c=e,o.clients.forEach((function(e,t){n===e&&c.get("ids").push([t])}));var t=new ne,r=o.dss.get(n);r&&(H(t,r),c.get("ds").push([t.toUint8Array()]))}}),0)})),e.on("afterTransaction",(function(e){setTimeout((function(){var t=c.get("ds"),n=e.deleteSet;if(e.local&&n.clients.size>0&&i(e,n)){var r=new ne;H(r,n),t.push([r.toUint8Array()])}}))}))}},{key:"getUserByClientId",value:function(e){return this.clients.get(e)||null}},{key:"getUserByDeletedId",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.dss.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=(0,d._)(i.value,2),c=u[0],a=u[1];if(L(a,e))return c}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null}}]),e}(),Oe=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,o._)(this,e),this.type=t,this.tname=n,this.item=r,this.assoc=i},Be=function(e){var t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},Ve=function(e){return new Oe(null==e.type?null:Ue(e.type.client,e.type.clock),e.tname||null,null==e.item?null:Ue(e.item.client,e.item.clock),null==e.assoc?0:e.assoc)},Me=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,o._)(this,e),this.type=t,this.index=n,this.assoc=r},Re=function(e,t,n){var r=null,i=null;return null===e._item?i=Ce(e):r=Ue(e._item.id.client,e._item.id.clock),new Oe(r,i,t,n)},Fe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e._start;if(n<0){if(0===t)return Re(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return Re(e,Ue(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return Re(e,r.lastId,n);r=r.right}return Re(e,null,n)},Le=function(e){var t=w.createEncoder();return function(e,t){var n=t.type,r=t.tname,i=t.item,o=t.assoc;if(null!==i)w.writeVarUint(e,0),je(e,i);else if(null!==r)w.writeUint8(e,1),w.writeVarString(e,r);else{if(null===n)throw I.unexpectedCase();w.writeUint8(e,2),je(e,n)}w.writeVarInt(e,o)}(t,e),w.toUint8Array(t)},Pe=function(e){return function(e){var t=null,n=null,r=null;switch(x.readVarUint(e)){case 0:r=Te(e);break;case 1:n=x.readVarString(e);break;case 2:t=Te(e)}var i=x.hasContent(e)?x.readVarInt(e):0;return new Oe(t,n,r,i)}(x.createDecoder(e))},ze=function(e,t){var n=t.store,r=e.item,i=e.type,o=e.tname,u=e.assoc,c=null,a=0;if(null!==r){if(ot(n,r.client)<=r.clock)return null;var s=yr(n,r),l=s.item;if(!(l instanceof xr))return null;if(null===(c=l.parent)._item||!c._item.deleted){a=l.deleted||!l.countable?0:s.diff+(u>=0?0:1);for(var f=l.left;null!==f;)!f.deleted&&f.countable&&(a+=f.length),f=f.left}}else{if(null!==o)c=t.get(o);else{if(null===i)throw I.unexpectedCase();if(ot(n,i.client)<=i.clock)return null;var h=yr(n,i).item;if(!(h instanceof xr&&h.content instanceof gr))return null;c=h.content.type}a=u>=0?c._length:0}return function(e,t){return new Me(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}(c,a,e.assoc)},qe=function(e,t){return e===t||null!==e&&null!==t&&e.tname===t.tname&&Ie(e.item,t.item)&&Ie(e.type,t.type)&&e.assoc===t.assoc},Je=function e(t,n){(0,o._)(this,e),this.ds=t,this.sv=n},Ge=function(e,t){var n=e.ds.clients,r=t.ds.clients,i=e.sv,o=t.sv;if(i.size!==o.size||n.size!==r.size)return!1;var u=!0,c=!1,a=void 0;try{for(var s,l=i.entries()[Symbol.iterator]();!(u=(s=l.next()).done);u=!0){var f=(0,d._)(s.value,2),h=f[0],p=f[1];if(o.get(h)!==p)return!1}}catch(e){c=!0,a=e}finally{try{u||null==l.return||l.return()}finally{if(c)throw a}}var v=!0,g=!1,y=void 0;try{for(var _,m=n.entries()[Symbol.iterator]();!(v=(_=m.next()).done);v=!0){var k=(0,d._)(_.value,2),w=k[0],x=k[1],b=r.get(w)||[];if(x.length!==b.length)return!1;for(var S=0;S<x.length;S++){var E=x[S],I=b[S];if(E.clock!==I.clock||E.len!==I.len)return!1}}}catch(e){g=!0,y=e}finally{try{v||null==m.return||m.return()}finally{if(g)throw y}}return!0},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ie;return H(t,e.ds),_e(t,e.sv),t.toUint8Array()},Xe=function(e){return He(e,new ne)},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ee(x.createDecoder(e));return new Je(X(t),ge(t))},Ye=function(e){return Ke(e,new Z(x.createDecoder(e)))},We=function(e,t){return new Je(e,t)},Qe=We(J(),new Map),Ze=function(e){return We(G(e.store),it(e.store))},$e=function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!L(t.ds,e.id)},et=function(e,t){var n=k.setIfUndefined(e.meta,et,T.create),r=e.doc.store;n.has(t)||(t.sv.forEach((function(t,n){t<ot(r,n)&&lt(e,Ue(n,t))})),F(e,t.ds,(function(e){})),n.add(t))},tt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Q;if(e.gc)throw Error("Garbage-collection must be disabled in `originDoc`!");var r=t.sv,i=t.ds,o=new oe;return e.transact((function(t){var n=0;r.forEach((function(e){e>0&&n++})),w.writeVarUint(o.restEncoder,n);var u=!0,c=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(u=(s=l.next()).done);u=!0){var f=(0,d._)(s.value,2),h=f[0],p=f[1];if(0!==p){p<ot(e.store,h)&&lt(t,Ue(h,p));var v=e.store.clients.get(h)||[],g=ct(v,p-1);w.writeVarUint(o.restEncoder,g+1),o.writeClient(h),w.writeVarUint(o.restEncoder,0);for(var y=0;y<=g;y++)v[y].write(o,0)}}}catch(e){c=!0,a=e}finally{try{u||null==l.return||l.return()}finally{if(c)throw a}}H(o,i)})),fe(n,o.toUint8Array(),"snapshot"),n},nt=function(e,t){return function(e,t){for(var n=new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:te)(x.createDecoder(t)),r=new It(n,!1),i=r.curr;null!==i;i=r.next())if((e.sv.get(i.id.client)||0)<i.id.clock+i.length)return!1;var o=z([e.ds,X(n)]);return Y(e.ds,o)}(e,t,$)},rt=function e(){(0,o._)(this,e),this.clients=new Map,this.pendingStructs=null,this.pendingDs=null},it=function(e){var t=new Map;return e.clients.forEach((function(e,n){var r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},ot=function(e,t){var n=e.clients.get(t);if(void 0===n)return 0;var r=n[n.length-1];return r.id.clock+r.length},ut=function(e,t){var n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{var r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw I.unexpectedCase()}n.push(t)},ct=function(e,t){var n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;for(var u=m.floor(t/(o+i.length-1)*r);n<=r;){if((o=(i=e[u]).id.clock)<=t){if(t<o+i.length)return u;n=u+1}else r=u-1;u=m.floor((n+r)/2)}throw I.unexpectedCase()},at=function(e,t){var n=e.clients.get(t.client);return n[ct(n,t.clock)]},st=function(e,t,n){var r=ct(t,n),i=t[r];return i.id.clock<n&&i instanceof xr?(t.splice(r+1,0,mr(e,i,n-i.id.clock)),r+1):r},lt=function(e,t){var n=e.doc.store.clients.get(t.client);return n[st(e,n,t.clock)]},ft=function(e,t,n){var r=t.clients.get(n.client),i=ct(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Zn&&r.splice(i+1,0,mr(e,o,n.clock-o.id.clock+1)),o},ht=function(e,t,n,r,i){if(0!==r){var o,u=n+r,c=st(e,t,n);do{u<(o=t[c++]).id.clock+o.length&&st(e,t,u),i(o)}while(c<t.length&&t[c].id.clock<u)}},dt=function e(t,n,r){(0,o._)(this,e),this.doc=t,this.deleteSet=new R,this.beforeState=it(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1},pt=function(e,t){return!(0===t.deleteSet.clients.size&&!k.any(t.afterState,(function(e,n){return t.beforeState.get(n)!==e}))||(P(t.deleteSet),ue(e,t.doc.store,t.beforeState),H(e,t.deleteSet),0))},vt=function(e,t,n){var r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&k.setIfUndefined(e.changed,t,T.create).add(n)},gt=function(e,t){for(var n=e[t],r=e[t-1],i=t;i>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--i-1])n instanceof xr&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);var o=t-i;return o&&e.splice(t+1-o,o),o},yt=function(e,t,n){var r=!0,i=!1,o=void 0;try{for(var u,c=e.clients.entries()[Symbol.iterator]();!(r=(u=c.next()).done);r=!0)for(var a=(0,d._)(u.value,2),s=a[0],l=a[1],f=t.clients.get(s),h=l.length-1;h>=0;h--)for(var p=l[h],v=p.clock+p.len,g=ct(f,p.clock),y=f[g];g<f.length&&y.id.clock<v;y=f[++g]){var _=f[g];if(p.clock+p.len<=_.id.clock)break;_ instanceof xr&&_.deleted&&!_.keep&&n(_)&&_.gc(t,!1)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}},_t=function(e,t){e.clients.forEach((function(e,n){for(var r=t.clients.get(n),i=e.length-1;i>=0;i--)for(var o=e[i],u=m.min(r.length-1,1+ct(r,o.clock+o.len-1)),c=r[u];u>0&&c.id.clock>=o.clock;c=r[u])u-=1+gt(r,u)}))},mt=function(e,t,n){yt(e,t,n),_t(e,t)},kt=function(e,t){if(t<e.length){var n=e[t],r=n.doc,i=r.store,o=n.deleteSet,u=n._mergeStructs;try{P(o),n.afterState=it(n.doc.store),r.emit("beforeObserverCalls",[n,r]);var c=[];n.changed.forEach((function(e,t){return c.push((function(){null!==t._item&&t._item.deleted||t._callObserver(n,e)}))})),c.push((function(){n.changedParentTypes.forEach((function(e,t){t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((function(e){return null===e.target._item||!e.target._item.deleted}))).forEach((function(e){e.currentTarget=t,e._path=null})),e.sort((function(e,t){return e.path.length-t.path.length})),Se(t._dEH,e,n))}))})),c.push((function(){return r.emit("afterTransaction",[n,r])})),(0,j.callAll)(c,[]),n._needFormattingCleanup&&Pn(n)}finally{r.gc&&yt(o,i,r.gcFilter),_t(o,i),n.afterState.forEach((function(e,t){var r=n.beforeState.get(t)||0;if(r!==e)for(var o=i.clients.get(t),u=m.max(ct(o,r),1),c=o.length-1;c>=u;)c-=1+gt(o,c)}));for(var a=u.length-1;a>=0;a--){var s=u[a].id,l=s.client,f=s.clock,h=i.clients.get(l),d=ct(h,f);!(d+1<h.length&&gt(h,d+1)>1)&&d>0&&gt(h,d)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(C.print(C.ORANGE,C.BOLD,"[yjs] ",C.UNBOLD,C.RED,"Changed the client-id because another client seems to be using it."),r.clientID=W()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){var p=new re;pt(p,n)&&r.emit("update",[p.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){var v=new oe;pt(v,n)&&r.emit("updateV2",[v.toUint8Array(),n.origin,r,n])}var g=n.subdocsAdded,y=n.subdocsLoaded,_=n.subdocsRemoved;(g.size>0||_.size>0||y.size>0)&&(g.forEach((function(e){e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),_.forEach((function(e){return r.subdocs.delete(e)})),r.emit("subdocs",[{loaded:y,added:g,removed:_},r,n]),_.forEach((function(e){return e.destroy()}))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):kt(e,t+1)}}},wt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=e._transactionCleanups,o=!1,u=null;null===e._transaction&&(o=!0,e._transaction=new dt(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{u=t(e._transaction)}finally{if(o){var c=e._transaction===i[0];e._transaction=null,c&&kt(i,0)}}return u},xt=function e(t,n){(0,o._)(this,e),this.insertions=n,this.deletions=t,this.meta=new Map},bt=function(e,t,n){F(e,n.deletions,(function(e){e instanceof xr&&t.scope.some((function(t){return De(t,e)}))&&_r(e,!1)}))},St=function(e,t,n){var r=null,i=null,o=e.doc,u=e.scope;if(wt(o,(function(n){for(;t.length>0&&null===r;)!function(){var i=o.store,c=t.pop(),a=new Set,s=[],l=!1;F(n,c.insertions,(function(e){if(e instanceof xr){if(null!==e.redone){var t=yr(i,e.id),r=t.item,o=t.diff;o>0&&(r=lt(n,Ue(r.id.client,r.id.clock+o))),e=r}!e.deleted&&u.some((function(t){return De(t,e)}))&&s.push(e)}})),F(n,c.deletions,(function(e){e instanceof xr&&u.some((function(t){return De(t,e)}))&&!L(c.insertions,e.id)&&a.add(e)})),a.forEach((function(t){l=null!==wr(n,t,a,c.insertions,e.ignoreRemoteMapChanges,e)||l}));for(var f=s.length-1;f>=0;f--){var h=s[f];e.deleteFilter(h)&&(h.delete(n),l=!0)}r=l?c:null}();n.changed.forEach((function(e,t){e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),i=n}),e),null!=r){var c=i.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:c},e])}return r},Et=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e){var r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.captureTimeout,a=u.captureTransaction,s=u.deleteFilter,l=u.trackedOrigins,f=void 0===l?new Set([null]):l,h=u.ignoreRemoteMapChanges,d=u.doc,p=void 0===d?_.isArray(e)?e[0].doc:e.doc:d;return(0,o._)(this,n),(r=t.call(this)).scope=[],r.doc=p,r.addToScope(e),r.deleteFilter=void 0===s?function(){return!0}:s,f.add((0,i._)(r)),r.trackedOrigins=f,r.captureTransaction=void 0===a?function(e){return!0}:a,r.undoStack=[],r.redoStack=[],r.undoing=!1,r.redoing=!1,r.lastChange=0,r.ignoreRemoteMapChanges=void 0!==h&&h,r.captureTimeout=void 0===c?500:c,r.afterTransactionHandler=function(e){if(r.captureTransaction(e)&&r.scope.some((function(t){return e.changedParentTypes.has(t)}))&&(r.trackedOrigins.has(e.origin)||e.origin&&r.trackedOrigins.has(e.origin.constructor))){var t=r.undoing,n=r.redoing,o=t?r.redoStack:r.undoStack;t?r.stopCapturing():n||r.clear(!1,!0);var u=new R;e.afterState.forEach((function(t,n){var r=e.beforeState.get(n)||0,i=t-r;i>0&&q(u,n,r,i)}));var c=D.getUnixTime(),a=!1;if(r.lastChange>0&&c-r.lastChange<r.captureTimeout&&o.length>0&&!t&&!n){var s=o[o.length-1];s.deletions=z([s.deletions,e.deleteSet]),s.insertions=z([s.insertions,u])}else o.push(new xt(e.deleteSet,u)),a=!0;t||n||(r.lastChange=c),F(e,e.deleteSet,(function(e){e instanceof xr&&r.scope.some((function(t){return De(t,e)}))&&_r(e,!0)}));var l=[{stackItem:o[o.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},(0,i._)(r)];a?r.emit("stack-item-added",l):r.emit("stack-item-updated",l)}},r.doc.on("afterTransaction",r.afterTransactionHandler),r.doc.on("destroy",(function(){r.destroy()})),r}return(0,u._)(n,[{key:"addToScope",value:function(e){var t=this;(e=_.isArray(e)?e:[e]).forEach((function(e){t.scope.every((function(t){return t!==e}))&&(e.doc!==t.doc&&C.warn("[yjs#509] Not same Y.Doc"),t.scope.push(e))}))}},{key:"addTrackedOrigin",value:function(e){this.trackedOrigins.add(e)}},{key:"removeTrackedOrigin",value:function(e){this.trackedOrigins.delete(e)}},{key:"clear",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this;(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((function(r){e&&(n.undoStack.forEach((function(e){return bt(r,n,e)})),n.undoStack=[]),t&&(n.redoStack.forEach((function(e){return bt(r,n,e)})),n.redoStack=[]),n.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}},{key:"stopCapturing",value:function(){this.lastChange=0}},{key:"undo",value:function(){var e;this.undoing=!0;try{e=St(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}},{key:"redo",value:function(){var e;this.redoing=!0;try{e=St(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}},{key:"canUndo",value:function(){return this.undoStack.length>0}},{key:"canRedo",value:function(){return this.redoStack.length>0}},{key:"destroy",value:function(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),(0,a._)((0,s._)(n.prototype),"destroy",this).call(this)}}]),n}(y.Observable),It=function(){function e(t,n){(0,o._)(this,e),this.gen=function(e){var t,n,r,i,o,u,c,a,s,l,f;return(0,g._)(this,(function(h){switch(h.label){case 0:t=x.readVarUint(e.restDecoder),n=0,h.label=1;case 1:if(!(n<t))return[3,10];r=x.readVarUint(e.restDecoder),i=e.readClient(),o=x.readVarUint(e.restDecoder),u=0,h.label=2;case 2:return u<r?10!==(c=e.readInfo())?[3,4]:(a=x.readVarUint(e.restDecoder),[4,new Er(Ue(i,o),a)]):[3,9];case 3:return h.sent(),o+=a,[3,8];case 4:return 0==(U.BITS5&c)?[3,6]:(s=0==(c&(U.BIT7|U.BIT8)),[4,l=new xr(Ue(i,o),null,(c&U.BIT8)===U.BIT8?e.readLeftID():null,null,(c&U.BIT7)===U.BIT7?e.readRightID():null,s?e.readParentInfo()?e.readString():e.readLeftID():null,s&&(c&U.BIT6)===U.BIT6?e.readString():null,br(e,c))]);case 5:return h.sent(),o+=l.length,[3,8];case 6:return f=e.readLen(),[4,new Zn(Ue(i,o),f)];case 7:h.sent(),o+=f,h.label=8;case 8:return u++,[3,2];case 9:return n++,[3,1];case 10:return[2]}}))}(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}return(0,u._)(e,[{key:"next",value:function(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Er);return this.curr}}]),e}(),Ut=function(e){return jt(e,$)},jt=function(e){for(var t=[],n=new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:te)(x.createDecoder(e)),r=new It(n,!1),i=r.curr;null!==i;i=r.next())t.push(i);C.print("Structs: ",t);var o=X(n);C.print("DeleteSet: ",o)},Tt=function(e){return Ct(e,$)},Ct=function(e){for(var t=[],n=new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:te)(x.createDecoder(e)),r=new It(n,!1),i=r.curr;null!==i;i=r.next())t.push(i);return{structs:t,ds:X(n)}},Dt=function e(t){(0,o._)(this,e),this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]},At=function(e){return Rt(e,$,re)},Nt=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te,n=new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie),r=new It(new t(x.createDecoder(e)),!1),i=r.curr;if(null===i)return w.writeVarUint(n.restEncoder,0),n.toUint8Array();for(var o=0,u=i.id.client,c=0!==i.id.clock,a=c?0:i.id.clock+i.length;null!==i;i=r.next())u!==i.id.client&&(0!==a&&(o++,w.writeVarUint(n.restEncoder,u),w.writeVarUint(n.restEncoder,a)),u=i.id.client,a=0,c=0!==i.id.clock),i.constructor===Er&&(c=!0),c||(a=i.id.clock+i.length);0!==a&&(o++,w.writeVarUint(n.restEncoder,u),w.writeVarUint(n.restEncoder,a));var s=w.createEncoder();return w.writeVarUint(s,o),w.writeBinaryEncoder(s,n.restEncoder),n.restEncoder=s,n.toUint8Array()},Ot=function(e){return Nt(e,ne,$)},Bt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,n=new Map,r=new Map,i=new It(new t(x.createDecoder(e)),!1),o=i.curr;if(null!==o){var u=o.id.client,c=o.id.clock;for(n.set(u,c);null!==o;o=i.next())u!==o.id.client&&(r.set(u,c),n.set(o.id.client,o.id.clock),u=o.id.client),c=o.id.clock+o.length;r.set(u,c)}return{from:n,to:r}},Vt=function(e){return Bt(e,$)},Mt=function(e,t){if(e.constructor===Zn){var n=e.id,r=n.client,i=n.clock;return new Zn(Ue(r,i+t),e.length-t)}if(e.constructor===Er){var o=e.id,u=o.client,c=o.clock;return new Er(Ue(u,c+t),e.length-t)}var a=e.id,s=a.client,l=a.clock;return new xr(Ue(s,l+t),null,Ue(s,l+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))},Rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oe;if(1===e.length)return e[0];for(var r=e.map((function(e){return new t(x.createDecoder(e))})),i=r.map((function(e){return new It(e,!0)})),o=null,u=new n,c=new Dt(u);"break"!==function(){if((i=i.filter((function(e){return null!==e.curr}))).sort((function(e,t){if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;var n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Er?1:-1:n})),0===i.length)return"break";var e=i[0],t=e.curr.id.client;if(null!==o){for(var n=e.curr,r=!1;null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>o.struct.id.clock+o.struct.length)return"continue";if(t!==o.struct.id.client)zt(c,o.struct,o.offset),o={struct:n,offset:0},e.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===Er)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{zt(c,o.struct,o.offset);var u=n.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Er(Ue(t,o.struct.id.clock+o.struct.length),u),offset:0}}else{var a=o.struct.id.clock+o.struct.length-n.id.clock;a>0&&(o.struct.constructor===Er?o.struct.length-=a:n=Mt(n,a)),o.struct.mergeWith(n)||(zt(c,o.struct,o.offset),o={struct:n,offset:0},e.next())}}else o={struct:e.curr,offset:0},e.next();for(var s=e.curr;null!==s&&s.id.client===t&&s.id.clock===o.struct.id.clock+o.struct.length&&s.constructor!==Er;s=e.next())zt(c,o.struct,o.offset),o={struct:s,offset:0}}(););return null!==o&&(zt(c,o.struct,o.offset),o=null),qt(c),H(u,z(r.map((function(e){return X(e)})))),u.toUint8Array()},Ft=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oe,i=ye(t),o=new r,u=new Dt(o),c=new n(x.createDecoder(e)),a=new It(c,!1);a.curr;){var s=a.curr,l=s.id.client,f=i.get(l)||0;if(a.curr.constructor!==Er)if(s.id.clock+s.length>f)for(zt(u,s,m.max(f-s.id.clock,0)),a.next();a.curr&&a.curr.id.client===l;)zt(u,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===l&&a.curr.id.clock+a.curr.length<=f;)a.next();else a.next()}return qt(u),H(o,X(c)),o.toUint8Array()},Lt=function(e,t){return Ft(e,t,$,re)},Pt=function(e){e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:w.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=w.createEncoder(),e.written=0)},zt=function(e,t,n){e.written>0&&e.currClient!==t.id.client&&Pt(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),w.writeVarUint(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},qt=function(e){Pt(e);var t=e.encoder.restEncoder;w.writeVarUint(t,e.clientStructs.length);for(var n=0;n<e.clientStructs.length;n++){var r=e.clientStructs[n];w.writeVarUint(t,r.written),w.writeUint8Array(t,r.restEncoder)}},Jt=function(e,t,n,r){for(var i=new n(x.createDecoder(e)),o=new It(i,!1),u=new r,c=new Dt(u),a=o.curr;null!==a;a=o.next())zt(c,t(a),0);return qt(c),H(u,X(i)),u.toUint8Array()},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.formatting,n=void 0===t||t,r=e.subdocs,i=void 0===r||r,o=e.yxml,u=void 0===o||o,c=0,a=k.create(),s=k.create(),l=k.create(),f=k.create();return f.set(null,null),function(e){switch(e.constructor){case Zn:case Er:return e;case xr:var t=e.content;switch(t.constructor){case er:break;case gr:if(u){var r=t.type;r instanceof Xn&&(r.nodeName=k.setIfUndefined(s,r.nodeName,(function(){return"node-"+c}))),r instanceof Yn&&(r.hookName=k.setIfUndefined(s,r.hookName,(function(){return"hook-"+c})))}break;case ur:t.arr=t.arr.map((function(){return c}));break;case $n:t.content=new Uint8Array([c]);break;case nr:i&&(t.opts={},t.doc.guid=c+"");break;case rr:t.embed={};break;case ir:n&&(t.key=k.setIfUndefined(l,t.key,(function(){return c+""})),t.value=k.setIfUndefined(f,t.value,(function(){return{i:c}})));break;case or:t.arr=t.arr.map((function(){return c}));break;case cr:t.str=A.repeat(c%10+"",t.str.length);break;default:I.unexpectedCase()}return e.parentSub&&(e.parentSub=k.setIfUndefined(a,e.parentSub,(function(){return c+""}))),c++,e;default:I.unexpectedCase()}}},Ht=function(e,t){return Jt(e,Gt(t),$,re)},Xt=function(e,t){return Jt(e,Gt(t),te,oe)},Kt=function(e){return Jt(e,j.id,$,oe)},Yt=function(e){return Jt(e,j.id,te,re)},Wt="You must not compute changes after the event-handler fired.",Qt=function(){function e(t,n){(0,o._)(this,e),this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}return(0,u._)(e,[{key:"path",get:function(){return this._path||(this._path=Zt(this.currentTarget,this.target))}},{key:"deletes",value:function(e){return L(this.transaction.deleteSet,e.id)}},{key:"keys",get:function(){var e=this;if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw I.create(Wt);var t=new Map,n=this.target;this.transaction.changed.get(n).forEach((function(r){if(null!==r){var i,o,u=n._map.get(r);if(e.adds(u)){for(var c=u.left;null!==c&&e.adds(c);)c=c.left;if(e.deletes(u)){if(null===c||!e.deletes(c))return;i="delete",o=_.last(c.content.getContent())}else null!==c&&e.deletes(c)?(i="update",o=_.last(c.content.getContent())):(i="add",o=void 0)}else{if(!e.deletes(u))return;i="delete",o=_.last(u.content.getContent())}t.set(r,{action:i,oldValue:o})}})),this._keys=t}return this._keys}},{key:"delta",get:function(){return this.changes.delta}},{key:"adds",value:function(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}},{key:"changes",get:function(){var e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw I.create(Wt);var t=this.target,n=T.create(),r=T.create(),i=[];if(e={added:n,deleted:r,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){for(var o=null,u=function(){o&&i.push(o)},c=t._start;null!==c;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((null===o||void 0===o.delete)&&(u(),o={delete:0}),o.delete+=c.length,r.add(c)):this.adds(c)?((null===o||void 0===o.insert)&&(u(),o={insert:[]}),o.insert=o.insert.concat(c.content.getContent()),n.add(c)):((null===o||void 0===o.retain)&&(u(),o={retain:0}),o.retain+=c.length);null!==o&&void 0===o.retain&&u()}this._changes=e}return e}}]),e}(),Zt=function(e,t){for(var n=[];null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{for(var r=0,i=t._item.parent._start;i!==t._item&&null!==i;)!i.deleted&&r++,i=i.right;n.unshift(r)}t=t._item.parent}return n},$t=0,en=function e(t,n){(0,o._)(this,e),t.marker=!0,this.p=t,this.index=n,this.timestamp=$t++},tn=function(e,t,n){e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=$t++},nn=function(e,t){if(null===e._start||0===t||null===e._searchMarker)return null;var n=0===e._searchMarker.length?null:e._searchMarker.reduce((function(e,n){return m.abs(t-e.index)<m.abs(t-n.index)?e:n})),r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,function(e){e.timestamp=$t++}(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)!(r=r.left).deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)!(r=r.left).deleted&&r.countable&&(i-=r.length);return null!==n&&m.abs(n.index-i)<r.parent.length/80?(tn(n,r,i),n):function(e,t,n){if(e.length>=80){var r=e.reduce((function(e,t){return e.timestamp<t.timestamp?e:t}));return tn(r,t,n),r}var i=new en(t,n);return e.push(i),i}(e._searchMarker,r,i)},rn=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(n>0){var o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)(o=o.left)&&!o.deleted&&o.countable&&(i.index-=o.length);if(null===o||!0===o.marker){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=m.max(t,i.index+n))}},on=function(e){for(var t=e._start,n=[];t;)n.push(t),t=t.right;return n},un=function(e,t,n){for(var r=e,i=t.changedParentTypes;k.setIfUndefined(i,e,(function(){return[]})).push(n),null!==e._item;)e=e._item.parent;Se(r._eH,n,t)},cn=function(){function e(){(0,o._)(this,e),this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=we(),this._dEH=we(),this._searchMarker=null}return(0,u._)(e,[{key:"parent",get:function(){return this._item?this._item.parent:null}},{key:"_integrate",value:function(e,t){this.doc=e,this._item=t}},{key:"_copy",value:function(){throw I.methodUnimplemented()}},{key:"clone",value:function(){throw I.methodUnimplemented()}},{key:"_write",value:function(e){}},{key:"_first",get:function(){for(var e=this._start;null!==e&&e.deleted;)e=e.right;return e}},{key:"_callObserver",value:function(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}},{key:"observe",value:function(e){xe(this._eH,e)}},{key:"observeDeep",value:function(e){xe(this._dEH,e)}},{key:"unobserve",value:function(e){be(this._eH,e)}},{key:"unobserveDeep",value:function(e){be(this._dEH,e)}},{key:"toJSON",value:function(){}}]),e}(),an=function(e,t,n){t<0&&(t=e._length+t),n<0&&(n=e._length+n);for(var r=n-t,i=[],o=e._start;null!==o&&r>0;){if(o.countable&&!o.deleted){var u=o.content.getContent();if(u.length<=t)t-=u.length;else{for(var c=t;c<u.length&&r>0;c++)i.push(u[c]),r--;t=0}}o=o.right}return i},sn=function(e){for(var t=[],n=e._start;null!==n;){if(n.countable&&!n.deleted)for(var r=n.content.getContent(),i=0;i<r.length;i++)t.push(r[i]);n=n.right}return t},ln=function(e,t){for(var n=[],r=e._start;null!==r;){if(r.countable&&$e(r,t))for(var i=r.content.getContent(),o=0;o<i.length;o++)n.push(i[o]);r=r.right}return n},fn=function(e,t){for(var n=0,r=e._start;null!==r;){if(r.countable&&!r.deleted)for(var i=r.content.getContent(),o=0;o<i.length;o++)t(i[o],n++,e);r=r.right}},hn=function(e,t){var n=[];return fn(e,(function(r,i){n.push(t(r,i,e))})),n},dn=function(e,t){var n=nn(e,t),r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},pn=function(e,t,n,r){var i=n,o=e.doc,u=o.clientID,c=o.store,a=null===n?t._start:n.right,s=[],l=function(){s.length>0&&((i=new xr(Ue(u,ot(c,u)),i,i&&i.lastId,a,a&&a.id,t,null,new ur(s))).integrate(e,0),s=[])};r.forEach((function(n){if(null===n)s.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:s.push(n);break;default:switch(l(),n.constructor){case Uint8Array:case ArrayBuffer:(i=new xr(Ue(u,ot(c,u)),i,i&&i.lastId,a,a&&a.id,t,null,new $n(new Uint8Array(n)))).integrate(e,0);break;case Q:(i=new xr(Ue(u,ot(c,u)),i,i&&i.lastId,a,a&&a.id,t,null,new nr(n))).integrate(e,0);break;default:if(!(n instanceof cn))throw Error("Unexpected content type in insert operation");(i=new xr(Ue(u,ot(c,u)),i,i&&i.lastId,a,a&&a.id,t,null,new gr(n))).integrate(e,0)}}})),l()},vn=function(){return I.create("Length exceeded!")},gn=function(e,t,n,r){if(n>t._length)throw vn();if(0===n)return t._searchMarker&&rn(t._searchMarker,n,r.length),pn(e,t,null,r);var i=n,o=nn(t,n),u=t._start;for(null!==o&&(u=o.p,0==(n-=o.index)&&(n+=(u=u.prev)&&u.countable&&!u.deleted?u.length:0));null!==u;u=u.right)if(!u.deleted&&u.countable){if(n<=u.length){n<u.length&&lt(e,Ue(u.id.client,u.id.clock+n));break}n-=u.length}return t._searchMarker&&rn(t._searchMarker,i,r.length),pn(e,t,u,r)},yn=function(e,t,n,r){if(0!==r){var i=n,o=r,u=nn(t,n),c=t._start;for(null!==u&&(c=u.p,n-=u.index);null!==c&&n>0;c=c.right)!c.deleted&&c.countable&&(n<c.length&&lt(e,Ue(c.id.client,c.id.clock+n)),n-=c.length);for(;r>0&&null!==c;)c.deleted||(r<c.length&&lt(e,Ue(c.id.client,c.id.clock+r)),c.delete(e),r-=c.length),c=c.right;if(r>0)throw vn();t._searchMarker&&rn(t._searchMarker,i,-o+r)}},_n=function(e,t,n){var r=t._map.get(n);void 0!==r&&r.delete(e)},mn=function(e,t,n,r){var i,o=t._map.get(n)||null,u=e.doc,c=u.clientID;if(null==r)i=new ur([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:i=new ur([r]);break;case Uint8Array:i=new $n(r);break;case Q:i=new nr(r);break;default:if(!(r instanceof cn))throw Error("Unexpected content type");i=new gr(r)}new xr(Ue(c,ot(u.store,c)),o,o&&o.lastId,null,null,t,n,i).integrate(e,0)},kn=function(e,t){var n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},wn=function(e){var t={};return e._map.forEach((function(e,n){e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},xn=function(e,t){var n=e._map.get(t);return void 0!==n&&!n.deleted},bn=function(e,t,n){for(var r=e._map.get(t)||null;null!==r&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return null!==r&&$e(r,n)?r.content.getContent()[r.length-1]:void 0},Sn=function(e){return N.iteratorFilter(e.entries(),(function(e){return!e[1].deleted}))},En=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this,e,r))._transaction=r,i}return n}(Qt),In=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){var e;return(0,o._)(this,n),(e=t.call(this))._prelimContent=[],e._searchMarker=[],e}return(0,u._)(n,[{key:"_integrate",value:function(e,t){(0,a._)((0,s._)(n.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.insert(0,this.toArray().map((function(e){return e instanceof cn?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"_callObserver",value:function(e,t){(0,a._)((0,s._)(n.prototype),"_callObserver",this).call(this,e,t),un(this,e,new En(this,e))}},{key:"insert",value:function(e,t){var n,r=this;null!==this.doc?wt(this.doc,(function(n){gn(n,r,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat((0,p._)(t)))}},{key:"push",value:function(e){var t,n=this;null!==this.doc?wt(this.doc,(function(t){!function(e,t,n){var r=(t._searchMarker||[]).reduce((function(e,t){return t.index>e.index?t:e}),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;pn(e,t,r,n)}(t,n,e)})):(t=this._prelimContent).push.apply(t,(0,p._)(e))}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;null!==this.doc?wt(this.doc,(function(r){yn(r,n,e,t)})):this._prelimContent.splice(e,t)}},{key:"get",value:function(e){return dn(this,e)}},{key:"toArray",value:function(){return sn(this)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return an(this,e,t)}},{key:"toJSON",value:function(){return this.map((function(e){return e instanceof cn?e.toJSON():e}))}},{key:"map",value:function(e){return hn(this,e)}},{key:"forEach",value:function(e){fn(this,e)}},{key:Symbol.iterator,value:function(){return function(e){var t,n=e._start,r=null,i=0;return t={},(0,c._)(t,Symbol.iterator,(function(){return this})),(0,c._)(t,"next",(function(){if(null===r){for(;null!==n&&n.deleted;)n=n.right;if(null===n)return{done:!0,value:void 0};r=n.content.getContent(),i=0,n=n.right}var e=r[i++];return r.length<=i&&(r=null),{done:!1,value:e}})),t}(this)}},{key:"_write",value:function(e){e.writeTypeRef(sr)}}],[{key:"from",value:function(e){var t=new n;return t.push(e),t}}]),n}(cn),Un=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e,r,i){var u;return(0,o._)(this,n),(u=t.call(this,e,r)).keysChanged=i,u}return n}(Qt),jn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e){var r;return(0,o._)(this,n),(r=t.call(this))._prelimContent=null,r._prelimContent=void 0===e?new Map:new Map(e),r}return(0,u._)(n,[{key:"_integrate",value:function(e,t){var r=this;(0,a._)((0,s._)(n.prototype),"_integrate",this).call(this,e,t),this._prelimContent.forEach((function(e,t){r.set(t,e)})),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return this.forEach((function(t,n){e.set(n,t instanceof cn?t.clone():t)})),e}},{key:"_callObserver",value:function(e,t){un(this,e,new Un(this,e,t))}},{key:"toJSON",value:function(){var e={};return this._map.forEach((function(t,n){if(!t.deleted){var r=t.content.getContent()[t.length-1];e[n]=r instanceof cn?r.toJSON():r}})),e}},{key:"size",get:function(){return(0,p._)(Sn(this._map)).length}},{key:"keys",value:function(){return N.iteratorMap(Sn(this._map),(function(e){return e[0]}))}},{key:"values",value:function(){return N.iteratorMap(Sn(this._map),(function(e){return e[1].content.getContent()[e[1].length-1]}))}},{key:"entries",value:function(){return N.iteratorMap(Sn(this._map),(function(e){return[e[0],e[1].content.getContent()[e[1].length-1]]}))}},{key:"forEach",value:function(e){var t=this;this._map.forEach((function(n,r){n.deleted||e(n.content.getContent()[n.length-1],r,t)}))}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"delete",value:function(e){var t=this;null!==this.doc?wt(this.doc,(function(n){_n(n,t,e)})):this._prelimContent.delete(e)}},{key:"set",value:function(e,t){var n=this;return null!==this.doc?wt(this.doc,(function(r){mn(r,n,e,t)})):this._prelimContent.set(e,t),t}},{key:"get",value:function(e){return kn(this,e)}},{key:"has",value:function(e){return xn(this,e)}},{key:"clear",value:function(){var e=this;null!==this.doc?wt(this.doc,(function(t){e.forEach((function(e,n,r){_n(t,r,n)}))})):this._prelimContent.clear()}},{key:"_write",value:function(e){e.writeTypeRef(lr)}}]),n}(cn),Tn=function(e,t){return e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&O.equalFlat(e,t)},Cn=function(){function e(t,n,r,i){(0,o._)(this,e),this.left=t,this.right=n,this.index=r,this.currentAttributes=i}return(0,u._)(e,[{key:"forward",value:function(){null===this.right&&I.unexpectedCase(),this.right.content.constructor===ir?this.right.deleted||On(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}]),e}(),Dn=function(e,t,n){for(;null!==t.right&&n>0;)t.right.content.constructor===ir?t.right.deleted||On(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&lt(e,Ue(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},An=function(e,t,n){var r=new Map,i=nn(t,n);return i?Dn(e,new Cn(i.p.left,i.p,i.index,r),n-i.index):Dn(e,new Cn(null,t._start,0,r),n)},Nn=function(e,t,n,r){for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===ir&&Tn(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();var i=e.doc,o=i.clientID;r.forEach((function(r,u){var c=n.left,a=n.right,s=new xr(Ue(o,ot(i.store,o)),c,c&&c.lastId,a,a&&a.id,t,null,new ir(u,r));s.integrate(e,0),n.right=s,n.forward()}))},On=function(e,t){var n=t.key,r=t.value;null===r?e.delete(n):e.set(n,r)},Bn=function(e,t){for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===ir&&Tn(t[e.right.content.key]||null,e.right.content.value));)e.forward()},Vn=function(e,t,n,r){var i=e.doc,o=i.clientID,u=new Map;for(var c in r){var a=r[c],s=n.currentAttributes.get(c)||null;if(!Tn(s,a)){u.set(c,s);var l=n.left,f=n.right;n.right=new xr(Ue(o,ot(i.store,o)),l,l&&l.lastId,f,f&&f.id,t,null,new ir(c,a)),n.right.integrate(e,0),n.forward()}}return u},Mn=function(e,t,n,r,i){n.currentAttributes.forEach((function(e,t){void 0===i[t]&&(i[t]=null)}));var o=e.doc,u=o.clientID;Bn(n,i);var c=Vn(e,t,n,i),a=r.constructor===String?new cr(r):r instanceof cn?new gr(r):new rr(r),s=n.left,l=n.right,f=n.index;t._searchMarker&&rn(t._searchMarker,n.index,a.getLength()),(l=new xr(Ue(u,ot(o.store,u)),s,s&&s.lastId,l,l&&l.id,t,null,a)).integrate(e,0),n.right=l,n.index=f,n.forward(),Nn(e,t,n,c)},Rn=function(e,t,n,r,i){var o=e.doc,u=o.clientID;Bn(n,i);for(var c=Vn(e,t,n,i);null!==n.right&&(r>0||c.size>0&&(n.right.deleted||n.right.content.constructor===ir));){if(!n.right.deleted)if(n.right.content.constructor===ir){var a=n.right.content,s=a.key,l=a.value,f=i[s];if(void 0!==f){if(Tn(f,l))c.delete(s);else{if(0===r)break;c.set(s,l)}n.right.delete(e)}else n.currentAttributes.set(s,l)}else r<n.right.length&&lt(e,Ue(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;n.forward()}if(r>0){for(var h="";r>0;r--)h+="\n";n.right=new xr(Ue(u,ot(o.store,u)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new cr(h)),n.right.integrate(e,0),n.forward()}Nn(e,t,n,c)},Fn=function(e,t,n,r,i){for(var o=t,u=k.create();o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===ir){var c=o.content;u.set(c.key,c)}o=o.right}for(var a=0,s=!1;t!==o;){if(n===t&&(s=!0),!t.deleted){var l=t.content;if(l.constructor===ir){var f=l.key,h=l.value,d=r.get(f)||null;u.get(f)===l&&d!==h||(t.delete(e),a++,s||(i.get(f)||null)!==h||d===h||(null===d?i.delete(f):i.set(f,d))),s||t.deleted||On(i,l)}}t=t.right}return a},Ln=function(e){var t=0;return wt(e.doc,(function(n){for(var r=e._start,i=e._start,o=k.create(),u=k.copy(o);i;)!1===i.deleted&&(i.content.constructor===ir?On(u,i.content):(t+=Fn(n,r,i,o,u),o=k.copy(u),r=i)),i=i.right})),t},Pn=function(e){var t=new Set,n=e.doc,r=!0,i=!1,o=void 0;try{for(var u,c=e.afterState.entries()[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var a=(0,d._)(u.value,2),s=a[0],l=a[1],f=e.beforeState.get(s)||0;l!==f&&ht(e,n.store.clients.get(s),f,l,(function(e){e.deleted||e.content.constructor!==ir||e.constructor===Zn||t.add(e.parent)}))}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}wt(n,(function(n){F(e,e.deleteSet,(function(e){if(!(e instanceof Zn||!e.parent._hasFormatting||t.has(e.parent))){var r=e.parent;e.content.constructor===ir?t.add(r):function(e,t){for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;for(var n=new Set;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ir){var r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}}(n,e)}}));var r=!0,i=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var a=u.value;Ln(a)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}}))},zn=function(e,t,n){for(var r=n,i=k.copy(t.currentAttributes),o=t.right;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case gr:case rr:case cr:n<t.right.length&&lt(e,Ue(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&Fn(e,o,t.right,i,t.currentAttributes);var u=(t.left||t.right).parent;return u._searchMarker&&rn(u._searchMarker,t.index,-r+n),t},qn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e,r,i){var u;return(0,o._)(this,n),(u=t.call(this,e,r)).childListChanged=!1,u.keysChanged=new Set,i.forEach((function(e){null===e?u.childListChanged=!0:u.keysChanged.add(e)})),u}return(0,u._)(n,[{key:"changes",get:function(){if(null===this._changes){var e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}},{key:"delta",get:function(){var e=this;if(null===this._delta){var t=this.target.doc,n=[];wt(t,(function(t){for(var r=new Map,i=new Map,o=e.target._start,u=null,c={},a="",s=0,l=0,f=function(){if(null!==u){var e=null;switch(u){case"delete":l>0&&(e={delete:l}),l=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},r.size>0&&(e.attributes={},r.forEach((function(t,n){null!==t&&(e.attributes[n]=t)})))),a="";break;case"retain":s>0&&(e={retain:s},O.isEmpty(c)||(e.attributes=O.assign({},c))),s=0}e&&n.push(e),u=null}};null!==o;){switch(o.content.constructor){case gr:case rr:e.adds(o)?e.deletes(o)||(f(),u="insert",a=o.content.getContent()[0],f()):e.deletes(o)?("delete"!==u&&(f(),u="delete"),l+=1):o.deleted||("retain"!==u&&(f(),u="retain"),s+=1);break;case cr:e.adds(o)?e.deletes(o)||("insert"!==u&&(f(),u="insert"),a+=o.content.str):e.deletes(o)?("delete"!==u&&(f(),u="delete"),l+=o.length):o.deleted||("retain"!==u&&(f(),u="retain"),s+=o.length);break;case ir:var h=o.content,d=h.key,p=h.value;if(e.adds(o))e.deletes(o)||(Tn(r.get(d)||null,p)?null!==p&&o.delete(t):("retain"===u&&f(),Tn(p,i.get(d)||null)?delete c[d]:c[d]=p));else if(e.deletes(o)){i.set(d,p);var v=r.get(d)||null;Tn(v,p)||("retain"===u&&f(),c[d]=v)}else if(!o.deleted){i.set(d,p);var g=c[d];void 0!==g&&(Tn(g,p)?null!==g&&o.delete(t):("retain"===u&&f(),null===p?delete c[d]:c[d]=p))}o.deleted||("insert"===u&&f(),On(r,o.content))}o=o.right}for(f();n.length>0;){var y=n[n.length-1];if(void 0===y.retain||void 0!==y.attributes)break;n.pop()}})),this._delta=n}return this._delta}}]),n}(Qt),Jn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e){var r;return(0,o._)(this,n),(r=t.call(this))._pending=void 0!==e?[function(){return r.insert(0,e)}]:[],r._searchMarker=[],r._hasFormatting=!1,r}return(0,u._)(n,[{key:"length",get:function(){return this._length}},{key:"_integrate",value:function(e,t){(0,a._)((0,s._)(n.prototype),"_integrate",this).call(this,e,t);try{this._pending.forEach((function(e){return e()}))}catch(e){console.error(e)}this._pending=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"_callObserver",value:function(e,t){(0,a._)((0,s._)(n.prototype),"_callObserver",this).call(this,e,t);var r=new qn(this,e,t);un(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}},{key:"toString",value:function(){for(var e="",t=this._start;null!==t;)!t.deleted&&t.countable&&t.content.constructor===cr&&(e+=t.content.str),t=t.right;return e}},{key:"toJSON",value:function(){return this.toString()}},{key:"applyDelta",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sanitize,n=void 0===t||t,r=this;null!==this.doc?wt(this.doc,(function(t){for(var i=new Cn(null,r._start,0,new Map),o=0;o<e.length;o++){var u=e[o];if(void 0!==u.insert){var c=n||"string"!=typeof u.insert||o!==e.length-1||null!==i.right||"\n"!==u.insert.slice(-1)?u.insert:u.insert.slice(0,-1);("string"!=typeof c||c.length>0)&&Mn(t,r,i,c,u.attributes||{})}else void 0!==u.retain?Rn(t,r,i,u.retain,u.attributes||{}):void 0!==u.delete&&zn(t,i,u.delete)}})):this._pending.push((function(){return r.applyDelta(e)}))}},{key:"toDelta",value:function(e,t,n){var r=function(){if(c.length>0){var e={},t=!1;o.forEach((function(n,r){t=!0,e[r]=n}));var n={insert:c};t&&(n.attributes=e),i.push(n),c=""}},i=[],o=new Map,u=this.doc,c="",a=this._start,s=function(){for(;null!==a;)!function(){if($e(a,e)||void 0!==t&&$e(a,t))switch(a.content.constructor){case cr:var u=o.get("ychange");void 0===e||$e(a,e)?void 0===t||$e(a,t)?void 0!==u&&(r(),o.delete("ychange")):(void 0===u||u.user!==a.id.client||"added"!==u.type)&&(r(),o.set("ychange",n?n("added",a.id):{type:"added"})):(void 0===u||u.user!==a.id.client||"removed"!==u.type)&&(r(),o.set("ychange",n?n("removed",a.id):{type:"removed"})),c+=a.content.str;break;case gr:case rr:r();var s={insert:a.content.getContent()[0]};if(o.size>0){var l={};s.attributes=l,o.forEach((function(e,t){l[t]=e}))}i.push(s);break;case ir:$e(a,e)&&(r(),On(o,a.content))}a=a.right}();r()};return e||t?wt(u,(function(n){e&&et(n,e),t&&et(n,t),s()}),"cleanup"):s(),i}},{key:"insert",value:function(e,t,n){var r=this;if(!(t.length<=0)){var i=this.doc;null!==i?wt(i,(function(i){var o=An(i,r,e);n||(n={},o.currentAttributes.forEach((function(e,t){n[t]=e}))),Mn(i,r,o,t,n)})):this._pending.push((function(){return r.insert(e,t,n)}))}}},{key:"insertEmbed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,i=this.doc;null!==i?wt(i,(function(i){var o=An(i,r,e);Mn(i,r,o,t,n)})):this._pending.push((function(){return r.insertEmbed(e,t,n)}))}},{key:"delete",value:function(e,t){var n=this;if(0!==t){var r=this.doc;null!==r?wt(r,(function(r){zn(r,An(r,n,e),t)})):this._pending.push((function(){return n.delete(e,t)}))}}},{key:"format",value:function(e,t,n){var r=this;if(0!==t){var i=this.doc;null!==i?wt(i,(function(i){var o=An(i,r,e);null!==o.right&&Rn(i,r,o,t,n)})):this._pending.push((function(){return r.format(e,t,n)}))}}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?wt(this.doc,(function(n){_n(n,t,e)})):this._pending.push((function(){return t.removeAttribute(e)}))}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?wt(this.doc,(function(r){mn(r,n,e,t)})):this._pending.push((function(){return n.setAttribute(e,t)}))}},{key:"getAttribute",value:function(e){return kn(this,e)}},{key:"getAttributes",value:function(){return wn(this)}},{key:"_write",value:function(e){e.writeTypeRef(fr)}}]),n}(cn),Gn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};(0,o._)(this,e),this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}return(0,u._)(e,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Xn&&t.constructor!==Hn||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}]),e}(),Hn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){var e;return(0,o._)(this,n),(e=t.call(this))._prelimContent=[],e}return(0,u._)(n,[{key:"firstChild",get:function(){var e=this._first;return e?e.content.getContent()[0]:null}},{key:"_integrate",value:function(e,t){(0,a._)((0,s._)(n.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.insert(0,this.toArray().map((function(e){return e instanceof cn?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"createTreeWalker",value:function(e){return new Gn(this,e)}},{key:"querySelector",value:function(e){e=e.toUpperCase();var t=new Gn(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})).next();return t.done?null:t.value}},{key:"querySelectorAll",value:function(e){return e=e.toUpperCase(),_.from(new Gn(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})))}},{key:"_callObserver",value:function(e,t){un(this,e,new Kn(this,t,e))}},{key:"toString",value:function(){return hn(this,(function(e){return e.toString()})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),fn(this,(function(i){r.insertBefore(i.toDOM(e,t,n),null)})),r}},{key:"insert",value:function(e,t){var n,r=this;null!==this.doc?wt(this.doc,(function(n){gn(n,r,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat((0,p._)(t)))}},{key:"insertAfter",value:function(e,t){var n=this;if(null!==this.doc)wt(this.doc,(function(r){pn(r,n,e&&e instanceof cn?e._item:e,t)}));else{var r=this._prelimContent,i=null===e?0:r.findIndex((function(t){return t===e}))+1;if(0===i&&null!==e)throw I.create("Reference item not found");r.splice.apply(r,[i,0].concat((0,p._)(t)))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;null!==this.doc?wt(this.doc,(function(r){yn(r,n,e,t)})):this._prelimContent.splice(e,t)}},{key:"toArray",value:function(){return sn(this)}},{key:"push",value:function(e){this.insert(this.length,e)}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"get",value:function(e){return dn(this,e)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return an(this,e,t)}},{key:"forEach",value:function(e){fn(this,e)}},{key:"_write",value:function(e){e.writeTypeRef(dr)}}]),n}(cn),Xn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";return(0,o._)(this,n),(e=t.call(this)).nodeName=r,e._prelimAttrs=new Map,e}return(0,u._)(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_integrate",value:function(e,t){var r=this;(0,a._)((0,s._)(n.prototype),"_integrate",this).call(this,e,t),this._prelimAttrs.forEach((function(e,t){r.setAttribute(t,e)})),this._prelimAttrs=null}},{key:"_copy",value:function(){return new n(this.nodeName)}},{key:"clone",value:function(){var e=new n(this.nodeName),t=this.getAttributes();return O.forEach(t,(function(t,n){"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((function(e){return e instanceof cn?e.clone():e}))),e}},{key:"toString",value:function(){var e=this.getAttributes(),t=[],r=[];for(var i in e)r.push(i);r.sort();for(var o=r.length,u=0;u<o;u++){var c=r[u];t.push(c+'="'+e[c]+'"')}var l=this.nodeName.toLocaleLowerCase(),f=t.length>0?" "+t.join(" "):"";return"<".concat(l).concat(f,">").concat((0,a._)((0,s._)(n.prototype),"toString",this).call(this),"</").concat(l,">")}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?wt(this.doc,(function(n){_n(n,t,e)})):this._prelimAttrs.delete(e)}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?wt(this.doc,(function(r){mn(r,n,e,t)})):this._prelimAttrs.set(e,t)}},{key:"getAttribute",value:function(e){return kn(this,e)}},{key:"hasAttribute",value:function(e){return xn(this,e)}},{key:"getAttributes",value:function(){return wn(this)}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createElement(this.nodeName),i=this.getAttributes();for(var o in i){var u=i[o];"string"==typeof u&&r.setAttribute(o,u)}return fn(this,(function(i){r.appendChild(i.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}},{key:"_write",value:function(e){e.writeTypeRef(hr),e.writeKey(this.nodeName)}}]),n}(Hn),Kn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e,r,i){var u;return(0,o._)(this,n),(u=t.call(this,e,i)).childListChanged=!1,u.attributesChanged=new Set,r.forEach((function(e){null===e?u.childListChanged=!0:u.attributesChanged.add(e)})),u}return n}(Qt),Yn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e){var r;return(0,o._)(this,n),(r=t.call(this)).hookName=e,r}return(0,u._)(n,[{key:"_copy",value:function(){return new n(this.hookName)}},{key:"clone",value:function(){var e=new n(this.hookName);return this.forEach((function(t,n){e.set(n,t)})),e}},{key:"toDOM",value:function(){var e,t=arguments.length>2?arguments[2]:void 0,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[this.hookName];return(e=void 0!==n?n.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==t&&t._createAssociation(e,this),e}},{key:"_write",value:function(e){e.writeTypeRef(pr),e.writeKey(this.hookName)}}]),n}(jn),Wn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,u._)(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0,n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}},{key:"toString",value:function(){return this.toDelta().map((function(e){var t=[];for(var n in e.attributes)!function(n){var r=[];for(var i in e.attributes[n])r.push({key:i,value:e.attributes[n][i]});r.sort((function(e,t){return e.key<t.key?-1:1})),t.push({nodeName:n,attrs:r})}(n);t.sort((function(e,t){return e.nodeName<t.nodeName?-1:1}));for(var r="",i=0;i<t.length;i++){var o=t[i];r+="<".concat(o.nodeName);for(var u=0;u<o.attrs.length;u++){var c=o.attrs[u];r+=" ".concat(c.key,'="').concat(c.value,'"')}r+=">"}r+=e.insert;for(var a=t.length-1;a>=0;a--)r+="</".concat(t[a].nodeName,">");return r})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"_write",value:function(e){e.writeTypeRef(vr)}}]),n}(Jn),Qn=function(){function e(t,n){(0,o._)(this,e),this.id=t,this.length=n}return(0,u._)(e,[{key:"deleted",get:function(){throw I.methodUnimplemented()}},{key:"mergeWith",value:function(e){return!1}},{key:"write",value:function(e,t,n){throw I.methodUnimplemented()}},{key:"integrate",value:function(e,t){throw I.methodUnimplemented()}}]),e}(),Zn=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,u._)(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){t>0&&(this.id.clock+=t,this.length-=t),ut(e.doc.store,this)}},{key:"write",value:function(e,t){e.writeInfo(0),e.writeLen(this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(Qn),$n=function(){function e(t){(0,o._)(this,e),this.content=t}return(0,u._)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.content]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.content)}},{key:"splice",value:function(e){throw I.methodUnimplemented()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeBuf(this.content)}},{key:"getRef",value:function(){return 3}}]),e}(),er=function(){function e(t){(0,o._)(this,e),this.len=t}return(0,u._)(e,[{key:"getLength",value:function(){return this.len}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.len)}},{key:"splice",value:function(t){var n=new e(this.len-t);return this.len=t,n}},{key:"mergeWith",value:function(e){return this.len+=e.len,!0}},{key:"integrate",value:function(e,t){q(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeLen(this.len-t)}},{key:"getRef",value:function(){return 1}}]),e}(),tr=function(e,t){return new Q((0,h._)((0,f._)({guid:e},t),{shouldLoad:t.shouldLoad||t.autoLoad||!1}))},nr=function(){function e(t){(0,o._)(this,e),t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;var n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),null!==t.meta&&(n.meta=t.meta)}return(0,u._)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.doc]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(tr(this.doc.guid,this.opts))}},{key:"splice",value:function(e){throw I.methodUnimplemented()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}},{key:"delete",value:function(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}},{key:"getRef",value:function(){return 9}}]),e}(),rr=function(){function e(t){(0,o._)(this,e),this.embed=t}return(0,u._)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.embed]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.embed)}},{key:"splice",value:function(e){throw I.methodUnimplemented()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeJSON(this.embed)}},{key:"getRef",value:function(){return 5}}]),e}(),ir=function(){function e(t,n){(0,o._)(this,e),this.key=t,this.value=n}return(0,u._)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.key,this.value)}},{key:"splice",value:function(e){throw I.methodUnimplemented()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){var n=t.parent;n._searchMarker=null,n._hasFormatting=!0}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeKey(this.key),e.writeJSON(this.value)}},{key:"getRef",value:function(){return 6}}]),e}(),or=function(){function e(t){(0,o._)(this,e),this.arr=t}return(0,u._)(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var r=t;r<n;r++){var i=this.arr[r];e.writeString(void 0===i?"undefined":JSON.stringify(i))}}},{key:"getRef",value:function(){return 2}}]),e}(),ur=function(){function e(t){(0,o._)(this,e),this.arr=t}return(0,u._)(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var r=t;r<n;r++){var i=this.arr[r];e.writeAny(i)}}},{key:"getRef",value:function(){return 8}}]),e}(),cr=function(){function e(t){(0,o._)(this,e),this.str=t}return(0,u._)(e,[{key:"getLength",value:function(){return this.str.length}},{key:"getContent",value:function(){return this.str.split("")}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.str)}},{key:"splice",value:function(t){var n=new e(this.str.slice(t));this.str=this.str.slice(0,t);var r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}},{key:"mergeWith",value:function(e){return this.str+=e.str,!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(0===t?this.str:this.str.slice(t))}},{key:"getRef",value:function(){return 4}}]),e}(),ar=[function(e){return new In},function(e){return new jn},function(e){return new Jn},function(e){return new Xn(e.readKey())},function(e){return new Hn},function(e){return new Yn(e.readKey())},function(e){return new Wn}],sr=0,lr=1,fr=2,hr=3,dr=4,pr=5,vr=6,gr=function(){function e(t){(0,o._)(this,e),this.type=t}return(0,u._)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.type]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.type._copy())}},{key:"splice",value:function(e){throw I.methodUnimplemented()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.type._integrate(e.doc,t)}},{key:"delete",value:function(e){for(var t=this.type._start;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((function(t){t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}},{key:"gc",value:function(e){for(var t=this.type._start;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((function(t){for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}},{key:"write",value:function(e,t){this.type._write(e)}},{key:"getRef",value:function(){return 7}}]),e}(),yr=function(e,t){var n,r=t,i=0;do{i>0&&(r=Ue(r.client,r.clock+i)),n=at(e,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof xr);return{item:n,diff:i}},_r=function(e,t){for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},mr=function(e,t,n){var r=t.id,i=r.client,o=r.clock,u=new xr(Ue(i,o+n),t,Ue(i,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&u.markDeleted(),t.keep&&(u.keep=!0),null!==t.redone&&(u.redone=Ue(t.redone.client,t.redone.clock+n)),t.right=u,null!==u.right&&(u.right.left=u),e._mergeStructs.push(u),null!==u.parentSub&&null===u.right&&u.parent._map.set(u.parentSub,u),t.length=n,u},kr=function(e,t){return _.some(e,(function(e){return L(e.deletions,t)}))},wr=function(e,t,n,r,i,o){var u,c=e.doc,a=c.store,s=c.clientID,l=t.redone;if(null!==l)return lt(e,l);var f=t.parent._item,h=null;if(null!==f&&!0===f.deleted){if(null===f.redone&&(!n.has(f)||null===wr(e,f,n,r,i,o)))return null;for(;null!==f.redone;)f=lt(e,f.redone)}var d=null===f?t.parent:f.content.type;if(null===t.parentSub){for(h=t.left,u=t;null!==h;){for(var p=h;null!==p&&p.parent._item!==f;)p=null===p.redone?null:lt(e,p.redone);if(null!==p&&p.parent._item===f){h=p;break}h=h.left}for(;null!==u;){for(var v=u;null!==v&&v.parent._item!==f;)v=null===v.redone?null:lt(e,v.redone);if(null!==v&&v.parent._item===f){u=v;break}u=u.right}}else if(u=null,t.right&&!i){for(h=t;null!==h&&null!==h.right&&(h.right.redone||L(r,h.right.id)||kr(o.undoStack,h.right.id)||kr(o.redoStack,h.right.id));)for(h=h.right;h.redone;)h=lt(e,h.redone);if(h&&null!==h.right)return null}else h=d._map.get(t.parentSub)||null;var g=ot(a,s),y=Ue(s,g),_=new xr(y,h,h&&h.lastId,u,u&&u.id,d,t.parentSub,t.content.copy());return t.redone=y,_r(_,!0),_.integrate(e,0),_},xr=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(e,r,i,u,c,a,s,l){var f;return(0,o._)(this,n),(f=t.call(this,e,l.getLength())).origin=i,f.left=r,f.right=u,f.rightOrigin=c,f.parent=a,f.parentSub=s,f.redone=null,f.content=l,f.info=f.content.isCountable()?U.BIT2:0,f}return(0,u._)(n,[{key:"marker",get:function(){return(this.info&U.BIT4)>0},set:function(e){(this.info&U.BIT4)>0!==e&&(this.info^=U.BIT4)}},{key:"keep",get:function(){return(this.info&U.BIT1)>0},set:function(e){this.keep!==e&&(this.info^=U.BIT1)}},{key:"countable",get:function(){return(this.info&U.BIT2)>0}},{key:"deleted",get:function(){return(this.info&U.BIT3)>0},set:function(e){this.deleted!==e&&(this.info^=U.BIT3)}},{key:"markDeleted",value:function(){this.info|=U.BIT3}},{key:"getMissing",value:function(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ot(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ot(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ee&&this.id.client!==this.parent.client&&this.parent.clock>=ot(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ft(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=lt(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Zn||this.right&&this.right.constructor===Zn)this.parent=null;else if(this.parent){if(this.parent.constructor===Ee){var r=at(t,this.parent);r.constructor===Zn?this.parent=null:this.parent=r.content.type}}else this.left&&this.left.constructor===n&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}},{key:"integrate",value:function(e,t){if(t>0&&(this.id.clock+=t,this.left=ft(e,e.doc.store,Ue(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){var n,r,i=this.left;if(null!==i)r=i.right;else if(null!==this.parentSub)for(r=this.parent._map.get(this.parentSub)||null;null!==r&&null!==r.left;)r=r.left;else r=this.parent._start;for(var o=new Set,u=new Set;null!==r&&r!==this.right;){if(u.add(r),o.add(r),Ie(this.origin,r.origin)){if(r.id.client<this.id.client)i=r,o.clear();else if(Ie(this.rightOrigin,r.rightOrigin))break}else{if(null===r.origin||!u.has(at(e.doc.store,r.origin)))break;o.has(at(e.doc.store,r.origin))||(i=r,o.clear())}r=r.right}this.left=i}if(null!==this.left){var c=this.left.right;this.right=c,this.left.right=this}else{if(null!==this.parentSub)for(n=this.parent._map.get(this.parentSub)||null;null!==n&&null!==n.left;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ut(e.doc.store,this),this.content.integrate(e,this),vt(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Zn(this.id,this.length).integrate(e,0)}},{key:"next",get:function(){for(var e=this.right;null!==e&&e.deleted;)e=e.right;return e}},{key:"prev",get:function(){for(var e=this.left;null!==e&&e.deleted;)e=e.left;return e}},{key:"lastId",get:function(){return 1===this.length?this.id:Ue(this.id.client,this.id.clock+this.length-1)}},{key:"mergeWith",value:function(e){var t=this;if(this.constructor===e.constructor&&Ie(e.origin,this.lastId)&&this.right===e&&Ie(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){var n=this.parent._searchMarker;return n&&n.forEach((function(n){n.p===e&&(n.p=t,!t.deleted&&t.countable&&(n.index-=t.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}},{key:"delete",value:function(e){if(!this.deleted){var t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),q(e.deleteSet,this.id.client,this.id.clock,this.length),vt(e,t,this.parentSub),this.content.delete(e)}}},{key:"gc",value:function(e,t){if(!this.deleted)throw I.unexpectedCase();this.content.gc(e),t?function(e,t,n){var r=e.clients.get(t.id.client);r[ct(r,t.id.clock)]=n}(e,this,new Zn(this.id,this.length)):this.content=new er(this.length)}},{key:"write",value:function(e,t){var n=t>0?Ue(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&U.BITS5|(null===n?0:U.BIT8)|(null===r?0:U.BIT7)|(null===i?0:U.BIT6);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){var u=this.parent;if(void 0!==u._item){var c=u._item;if(null===c){var a=Ce(u);e.writeParentInfo(!0),e.writeString(a)}else e.writeParentInfo(!1),e.writeLeftID(c.id)}else u.constructor===String?(e.writeParentInfo(!0),e.writeString(u)):u.constructor===Ee?(e.writeParentInfo(!1),e.writeLeftID(u)):I.unexpectedCase();null!==i&&e.writeString(i)}this.content.write(e,t)}}]),n}(Qn),br=function(e,t){return Sr[t&U.BITS5](e)},Sr=[function(){I.unexpectedCase()},function(e){return new er(e.readLen())},function(e){for(var t=e.readLen(),n=[],r=0;r<t;r++){var i=e.readString();"undefined"===i?n.push(void 0):n.push(JSON.parse(i))}return new or(n)},function(e){return new $n(e.readBuf())},function(e){return new cr(e.readString())},function(e){return new rr(e.readJSON())},function(e){return new ir(e.readKey(),e.readJSON())},function(e){return new gr(ar[e.readTypeRef()](e))},function(e){for(var t=e.readLen(),n=[],r=0;r<t;r++)n.push(e.readAny());return new ur(n)},function(e){return new nr(tr(e.readString(),e.readAny()))},function(){I.unexpectedCase()}],Er=function(e){(0,l._)(n,e);var t=(0,v._)(n);function n(){return(0,o._)(this,n),t.apply(this,arguments)}return(0,u._)(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){I.unexpectedCase()}},{key:"write",value:function(e,t){e.writeInfo(10),w.writeVarUint(e.restEncoder,this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(Qn),Ir="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==B?B:{},Ur="__ $YJS$ __";!0===Ir[Ur]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Ir[Ur]=!0},{"@swc/helpers/_/_assert_this_initialized":"ijsjR","@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_define_property":"ikzUS","@swc/helpers/_/_get":"eIgRj","@swc/helpers/_/_get_prototype_of":"cFXpH","@swc/helpers/_/_inherits":"cPJNz","@swc/helpers/_/_object_spread":"2BmK3","@swc/helpers/_/_object_spread_props":"27c5K","@swc/helpers/_/_sliced_to_array":"gC503","@swc/helpers/_/_to_consumable_array":"cs7QR","@swc/helpers/_/_create_super":"4oibw","@swc/helpers/_/_ts_generator":"9rWj2","lib0/observable":"aUaCO","lib0/array":"2z4Xy","lib0/math":"MxBNi","lib0/map":"h1wtE","lib0/encoding":"krt44","lib0/decoding":"5BDqt","lib0/random":"l8Gr3","lib0/promise":"k2SDl","lib0/buffer":"2Sa2X","lib0/error":"f7uYS","lib0/binary":"i2nVL","lib0/function":"hHL2r","lib0/set":"3a4aw","lib0/logging":"lLXz8","lib0/time":"anuek","lib0/string":"iUpUb","lib0/iterator":"e8ara","lib0/object":"gI02x","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"27c5K":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}r.defineInteropFlag(n),r.export(n,"_object_spread_props",(function(){return i})),r.export(n,"_",(function(){return i}))},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],aUaCO:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"ObservableV2",(function(){return l})),r.export(n,"Observable",(function(){return f}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=e("@swc/helpers/_/_to_consumable_array"),c=e("./map.js"),a=e("./set.js"),s=e("./array.js"),l=function(){function e(){(0,i._)(this,e),this._observers=c.create()}return(0,o._)(e,[{key:"on",value:function(e,t){return c.setIfUndefined(this._observers,e,a.create).add(t),t}},{key:"once",value:function(e,t){var n=this,r=function(){for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];n.off(e,r),t.apply(void 0,(0,u._)(o))};this.on(e,r)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return s.from((this._observers.get(e)||c.create()).values()).forEach((function(e){return e.apply(void 0,(0,u._)(t))}))}},{key:"destroy",value:function(){this._observers=c.create()}}]),e}(),f=function(){function e(){(0,i._)(this,e),this._observers=c.create()}return(0,o._)(e,[{key:"on",value:function(e,t){c.setIfUndefined(this._observers,e,a.create).add(t)}},{key:"once",value:function(e,t){var n=this,r=function(){for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];n.off(e,r),t.apply(void 0,(0,u._)(o))};this.on(e,r)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return s.from((this._observers.get(e)||c.create()).values()).forEach((function(e){return e.apply(void 0,(0,u._)(t))}))}},{key:"destroy",value:function(){this._observers=c.create()}}]),e}()},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_to_consumable_array":"cs7QR","./map.js":"h1wtE","./set.js":"3a4aw","./array.js":"2z4Xy","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],h1wtE:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"create",(function(){return o})),r.export(n,"copy",(function(){return u})),r.export(n,"setIfUndefined",(function(){return c})),r.export(n,"map",(function(){return a})),r.export(n,"any",(function(){return s})),r.export(n,"all",(function(){return l}));var i=e("@swc/helpers/_/_sliced_to_array"),o=function(){return new Map},u=function(e){var t=o();return e.forEach((function(e,n){t.set(n,e)})),t},c=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},a=function(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){var s=(0,i._)(c.value,2),l=s[0],f=s[1];n.push(t(f,l))}}catch(e){o=!0,u=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw u}}return n},s=function(e,t){var n=!0,r=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var a=(0,i._)(u.value,2),s=a[0];if(t(a[1],s))return!0}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return!1},l=function(e,t){var n=!0,r=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var a=(0,i._)(u.value,2),s=a[0];if(!t(a[1],s))return!1}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return!0}},{"@swc/helpers/_/_sliced_to_array":"gC503","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"3a4aw":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"create",(function(){return i})),r.export(n,"toArray",(function(){return o})),r.export(n,"first",(function(){return u})),r.export(n,"from",(function(){return c}));var i=function(){return new Set},o=function(e){return Array.from(e)},u=function(e){return e.values().next().value||void 0},c=function(e){return new Set(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"2z4Xy":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"last",(function(){return o})),r.export(n,"create",(function(){return u})),r.export(n,"copy",(function(){return c})),r.export(n,"appendTo",(function(){return a})),r.export(n,"from",(function(){return s})),r.export(n,"every",(function(){return l})),r.export(n,"some",(function(){return f})),r.export(n,"equalFlat",(function(){return h})),r.export(n,"flatten",(function(){return d})),r.export(n,"unfold",(function(){return p})),r.export(n,"fold",(function(){return v})),r.export(n,"isArray",(function(){return g})),r.export(n,"unique",(function(){return y})),r.export(n,"uniqueBy",(function(){return _})),r.export(n,"map",(function(){return m}));var i=e("./set.js"),o=function(e){return e[e.length-1]},u=function(){return[]},c=function(e){return e.slice()},a=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},s=Array.from,l=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},f=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},h=function(e,t){return e.length===t.length&&l(e,(function(e,n){return e===t[n]}))},d=function(e){return v(e,[],(function(e,t){return e.concat(t)}))},p=function(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t(r,n);return n},v=function(e,t,n){return e.reduce(n,t)},g=Array.isArray,y=function(e){return s(i.from(e))},_=function(e,t){for(var n=i.create(),r=[],o=0;o<e.length;o++){var u=e[o],c=t(u);n.has(c)||(n.add(c),r.push(u))}return r},m=function(e,t){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=t(e[r],r,e);return n}},{"./set.js":"3a4aw","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],MxBNi:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"floor",(function(){return i})),r.export(n,"ceil",(function(){return o})),r.export(n,"abs",(function(){return u})),r.export(n,"imul",(function(){return c})),r.export(n,"round",(function(){return a})),r.export(n,"log10",(function(){return s})),r.export(n,"log2",(function(){return l})),r.export(n,"log",(function(){return f})),r.export(n,"sqrt",(function(){return h})),r.export(n,"add",(function(){return d})),r.export(n,"min",(function(){return p})),r.export(n,"max",(function(){return v})),r.export(n,"isNaN",(function(){return g})),r.export(n,"pow",(function(){return y})),r.export(n,"exp10",(function(){return _})),r.export(n,"sign",(function(){return m})),r.export(n,"isNegativeZero",(function(){return k}));var i=Math.floor,o=Math.ceil,u=Math.abs,c=Math.imul,a=Math.round,s=Math.log10,l=Math.log2,f=Math.log,h=Math.sqrt,d=function(e,t){return e+t},p=function(e,t){return e<t?e:t},v=function(e,t){return e>t?e:t},g=Number.isNaN,y=Math.pow,_=function(e){return Math.pow(10,e)},m=Math.sign,k=function(e){return 0!==e?e<0:1/e<0}},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],krt44:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"Encoder",(function(){return v})),r.export(n,"createEncoder",(function(){return g})),r.export(n,"encode",(function(){return y})),r.export(n,"length",(function(){return _})),r.export(n,"hasContent",(function(){return m})),r.export(n,"toUint8Array",(function(){return k})),r.export(n,"verifyLen",(function(){return w})),r.export(n,"write",(function(){return x})),r.export(n,"set",(function(){return b})),r.export(n,"writeUint8",(function(){return S})),r.export(n,"setUint8",(function(){return E})),r.export(n,"writeUint16",(function(){return I})),r.export(n,"setUint16",(function(){return U})),r.export(n,"writeUint32",(function(){return j})),r.export(n,"writeUint32BigEndian",(function(){return T})),r.export(n,"setUint32",(function(){return C})),r.export(n,"writeVarUint",(function(){return D})),r.export(n,"writeVarInt",(function(){return A})),r.export(n,"_writeVarStringNative",(function(){return B})),r.export(n,"_writeVarStringPolyfill",(function(){return V})),r.export(n,"writeVarString",(function(){return M})),r.export(n,"writeTerminatedString",(function(){return R})),r.export(n,"writeTerminatedUint8Array",(function(){return F})),r.export(n,"writeBinaryEncoder",(function(){return L})),r.export(n,"writeUint8Array",(function(){return P})),r.export(n,"writeVarUint8Array",(function(){return z})),r.export(n,"writeOnDataView",(function(){return q})),r.export(n,"writeFloat32",(function(){return J})),r.export(n,"writeFloat64",(function(){return G})),r.export(n,"writeBigInt64",(function(){return H})),r.export(n,"writeBigUint64",(function(){return X})),r.export(n,"writeAny",(function(){return Y})),r.export(n,"RleEncoder",(function(){return W})),r.export(n,"IntDiffEncoder",(function(){return Q})),r.export(n,"RleIntDiffEncoder",(function(){return Z})),r.export(n,"UintOptRleEncoder",(function(){return ee})),r.export(n,"IncUintOptRleEncoder",(function(){return te})),r.export(n,"IntDiffOptRleEncoder",(function(){return re})),r.export(n,"StringEncoder",(function(){return ie}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=e("@swc/helpers/_/_inherits"),c=e("@swc/helpers/_/_type_of"),a=e("@swc/helpers/_/_create_super"),s=e("./buffer.js"),l=e("./math.js"),f=e("./number.js"),h=e("./binary.js"),d=e("./string.js"),p=e("./array.js"),v=function e(){(0,i._)(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]},g=function(){return new v},y=function(e){var t=g();return e(t),k(t)},_=function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},m=function(e){return e.cpos>0||e.bufs.length>0},k=function(e){for(var t=new Uint8Array(_(e)),n=0,r=0;r<e.bufs.length;r++){var i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(s.createUint8ArrayViewFromArrayBuffer(e.cbuf.buffer,0,e.cpos),n),t},w=function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(s.createUint8ArrayViewFromArrayBuffer(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*l.max(n,t)),e.cpos=0)},x=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},b=function(e,t,n){for(var r=null,i=0;i<e.bufs.length&&null===r;i++){var o=e.bufs[i];t<o.length?r=o:t-=o.length}null===r&&(r=e.cbuf),r[t]=n},S=x,E=b,I=function(e,t){x(e,t&h.BITS8),x(e,t>>>8&h.BITS8)},U=function(e,t,n){b(e,t,n&h.BITS8),b(e,t+1,n>>>8&h.BITS8)},j=function(e,t){for(var n=0;n<4;n++)x(e,t&h.BITS8),t>>>=8},T=function(e,t){for(var n=3;n>=0;n--)x(e,t>>>8*n&h.BITS8)},C=function(e,t,n){for(var r=0;r<4;r++)b(e,t+r,n&h.BITS8),n>>>=8},D=function(e,t){for(;t>h.BITS7;)x(e,h.BIT8|h.BITS7&t),t=l.floor(t/128);x(e,h.BITS7&t)},A=function(e,t){var n=l.isNegativeZero(t);for(n&&(t=-t),x(e,(t>h.BITS6?h.BIT8:0)|(n?h.BIT7:0)|h.BITS6&t),t=l.floor(t/64);t>0;)x(e,(t>h.BITS7?h.BIT8:0)|h.BITS7&t),t=l.floor(t/128)},N=new Uint8Array(3e4),O=N.length/3,B=function(e,t){if(t.length<O){var n=d.utf8TextEncoder.encodeInto(t,N).written||0;D(e,n);for(var r=0;r<n;r++)x(e,N[r])}else z(e,d.encodeUtf8(t))},V=function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;D(e,r);for(var i=0;i<r;i++)x(e,n.codePointAt(i))},M=d.utf8TextEncoder&&d.utf8TextEncoder.encodeInto?B:V,R=function(e,t){return F(e,d.encodeUtf8(t))},F=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];(0===r||1===r)&&x(e,1),x(e,t[n])}x(e,0)},L=function(e,t){return P(e,k(t))},P=function(e,t){var n=e.cbuf.length,r=e.cpos,i=l.min(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(l.max(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},z=function(e,t){D(e,t.byteLength),P(e,t)},q=function(e,t){w(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},J=function(e,t){return q(e,4).setFloat32(0,t,!1)},G=function(e,t){return q(e,8).setFloat64(0,t,!1)},H=function(e,t){return q(e,8).setBigInt64(0,t,!1)},X=function(e,t){return q(e,8).setBigUint64(0,t,!1)},K=new DataView(new ArrayBuffer(4)),Y=function(e,t){switch(void 0===t?"undefined":(0,c._)(t)){case"string":x(e,119),M(e,t);break;case"number":f.isInteger(t)&&l.abs(t)<=h.BITS31?(x(e,125),A(e,t)):(K.setFloat32(0,t),K.getFloat32(0)===t?(x(e,124),J(e,t)):(x(e,123),G(e,t)));break;case"bigint":x(e,122),H(e,t);break;case"object":if(null===t)x(e,126);else if(p.isArray(t)){x(e,117),D(e,t.length);for(var n=0;n<t.length;n++)Y(e,t[n])}else if(t instanceof Uint8Array)x(e,116),z(e,t);else{x(e,118);var r=Object.keys(t);D(e,r.length);for(var i=0;i<r.length;i++){var o=r[i];M(e,o),Y(e,t[o])}}break;case"boolean":x(e,t?120:121);break;default:x(e,127)}},W=function(e){(0,u._)(n,e);var t=(0,a._)(n);function n(e){var r;return(0,i._)(this,n),(r=t.call(this)).w=e,r.s=null,r.count=0,r}return(0,o._)(n,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&D(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}]),n}(v),Q=function(e){(0,u._)(n,e);var t=(0,a._)(n);function n(e){var r;return(0,i._)(this,n),(r=t.call(this)).s=e,r}return(0,o._)(n,[{key:"write",value:function(e){A(this,e-this.s),this.s=e}}]),n}(v),Z=function(e){(0,u._)(n,e);var t=(0,a._)(n);function n(e){var r;return(0,i._)(this,n),(r=t.call(this)).s=e,r.count=0,r}return(0,o._)(n,[{key:"write",value:function(e){this.s===e&&this.count>0?this.count++:(this.count>0&&D(this,this.count-1),this.count=1,A(this,e-this.s),this.s=e)}}]),n}(v),$=function(e){e.count>0&&(A(e.encoder,1===e.count?e.s:-e.s),e.count>1&&D(e.encoder,e.count-2))},ee=function(){function e(){(0,i._)(this,e),this.encoder=new v,this.s=0,this.count=0}return(0,o._)(e,[{key:"write",value:function(e){this.s===e?this.count++:($(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return $(this),k(this.encoder)}}]),e}(),te=function(){function e(){(0,i._)(this,e),this.encoder=new v,this.s=0,this.count=0}return(0,o._)(e,[{key:"write",value:function(e){this.s+this.count===e?this.count++:($(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return $(this),k(this.encoder)}}]),e}(),ne=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);A(e.encoder,t),e.count>1&&D(e.encoder,e.count-2)}},re=function(){function e(){(0,i._)(this,e),this.encoder=new v,this.s=0,this.count=0,this.diff=0}return(0,o._)(e,[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(ne(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return ne(this),k(this.encoder)}}]),e}(),ie=function(){function e(){(0,i._)(this,e),this.sarr=[],this.s="",this.lensE=new ee}return(0,o._)(e,[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new v;return this.sarr.push(this.s),this.s="",M(e,this.sarr.join("")),P(e,this.lensE.toUint8Array()),k(e)}}]),e}()},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_inherits":"cPJNz","@swc/helpers/_/_type_of":"jO300","@swc/helpers/_/_create_super":"4oibw","./buffer.js":"2Sa2X","./math.js":"MxBNi","./number.js":"jakRM","./binary.js":"i2nVL","./string.js":"iUpUb","./array.js":"2z4Xy","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"2Sa2X":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"createUint8ArrayFromLen",(function(){return f})),r.export(n,"createUint8ArrayViewFromArrayBuffer",(function(){return h})),r.export(n,"createUint8ArrayFromArrayBuffer",(function(){return d})),r.export(n,"toBase64",(function(){return p})),r.export(n,"fromBase64",(function(){return v})),r.export(n,"toBase64UrlEncoded",(function(){return g})),r.export(n,"fromBase64UrlEncoded",(function(){return y})),r.export(n,"toHexString",(function(){return _})),r.export(n,"fromHexString",(function(){return m})),r.export(n,"copyUint8Array",(function(){return k})),r.export(n,"encodeAny",(function(){return w})),r.export(n,"decodeAny",(function(){return x})),r.export(n,"shiftNBitsLeft",(function(){return b}));var i=e("./string.js"),o=e("./environment.js"),u=e("./array.js"),c=e("./math.js"),a=e("./encoding.js"),s=e("./decoding.js"),l=e("6475e0e5014d10a8").Buffer,f=function(e){return new Uint8Array(e)},h=function(e,t,n){return new Uint8Array(e,t,n)},d=function(e){return new Uint8Array(e)},p=o.isBrowser?function(e){for(var t="",n=0;n<e.byteLength;n++)t+=i.fromCharCode(e[n]);return btoa(t)}:function(e){return l.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")},v=o.isBrowser?function(e){for(var t=atob(e),n=f(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}:function(e){var t=l.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},g=function(e){return p(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")},y=function(e){return v(e.replaceAll("-","+").replaceAll("_","/"))},_=function(e){return u.map(e,(function(e){return e.toString(16).padStart(2,"0")})).join("")},m=function(e){for(var t=e.length,n=new Uint8Array(c.ceil(t/2)),r=0;r<t;r+=2)n[n.length-r/2-1]=Number.parseInt(e.slice(t-r-2,t-r),16);return n},k=function(e){var t=f(e.byteLength);return t.set(e),t},w=function(e){var t=a.createEncoder();return a.writeAny(t,e),a.toUint8Array(t)},x=function(e){return s.readAny(s.createDecoder(e))},b=function(e,t){if(0===t)return e;(e=new Uint8Array(e))[0]<<=t;for(var n=1;n<e.length;n++)e[n-1]|=e[n]>>>8-t,e[n]<<=t;return e}},{"6475e0e5014d10a8":"ac1pI","./string.js":"iUpUb","./environment.js":"aLHxR","./array.js":"2z4Xy","./math.js":"MxBNi","./encoding.js":"krt44","./decoding.js":"5BDqt","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],iUpUb:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"fromCharCode",(function(){return o})),r.export(n,"fromCodePoint",(function(){return u})),r.export(n,"MAX_UTF16_CHARACTER",(function(){return c})),r.export(n,"trimLeft",(function(){return s})),r.export(n,"fromCamelCase",(function(){return f})),r.export(n,"utf8ByteLength",(function(){return h})),r.export(n,"_encodeUtf8Polyfill",(function(){return d})),r.export(n,"utf8TextEncoder",(function(){return p})),r.export(n,"_encodeUtf8Native",(function(){return v})),r.export(n,"encodeUtf8",(function(){return g})),r.export(n,"_decodeUtf8Polyfill",(function(){return y})),r.export(n,"utf8TextDecoder",(function(){return _})),r.export(n,"_decodeUtf8Native",(function(){return m})),r.export(n,"decodeUtf8",(function(){return k})),r.export(n,"splice",(function(){return w})),r.export(n,"repeat",(function(){return x}));var i=e("./array.js"),o=String.fromCharCode,u=String.fromCodePoint,c=o(65535),a=/^\s*/g,s=function(e){return e.replace(a,"")},l=/([A-Z])/g,f=function(e,t){return s(e.replace(l,(function(e){return"".concat(t).concat(e.toLowerCase())})))},h=function(e){return unescape(encodeURIComponent(e)).length},d=function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.codePointAt(i);return r},p="undefined"!=typeof TextEncoder?new TextEncoder:null,v=function(e){return p.encode(e)},g=p?v:d,y=function(e){for(var t=e.length,n="",r=0;t>0;){var i=t<1e4?t:1e4,o=e.subarray(r,r+i);r+=i,n+=String.fromCodePoint.apply(null,o),t-=i}return decodeURIComponent(escape(n))},_="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});_&&1===_.decode(new Uint8Array).length&&(_=null);var m=function(e){return _.decode(e)},k=_?m:y,w=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.slice(0,t)+r+e.slice(t+n)},x=function(e,t){return i.unfold(t,(function(){return e})).join("")}},{"./array.js":"2z4Xy","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],aLHxR:[function(e,t,n){var r,i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"isNode",(function(){return h})),i.export(n,"isBrowser",(function(){return d})),i.export(n,"isMac",(function(){return p})),i.export(n,"hasParam",(function(){return y})),i.export(n,"getParam",(function(){return _})),i.export(n,"getVariable",(function(){return m})),i.export(n,"getConf",(function(){return k})),i.export(n,"hasConf",(function(){return w})),i.export(n,"production",(function(){return x})),i.export(n,"supportsColor",(function(){return S}));var o=e("@swc/helpers/_/_sliced_to_array"),u=e("./map.js"),c=e("./string.js"),a=e("./conditions.js"),s=e("./storage.js"),l=e("./function.js"),f=e("2cfb8bcef1022e2a"),h=void 0!==f&&f.release&&/node|io\.js/.test(f.release.name),d="undefined"!=typeof window&&"undefined"!=typeof document&&!h,p="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),v=[],g=function(){if(void 0===r)if(h){r=u.create();for(var e=f.argv,t=null,n=0;n<e.length;n++){var i=e[n];"-"===i[0]?(null!==t&&r.set(t,""),t=i):null!==t?(r.set(t,i),t=null):v.push(i)}null!==t&&r.set(t,"")}else"object"==typeof location?(r=u.create(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=(0,o._)(e.split("="),2),n=t[0],i=t[1];r.set("--".concat(c.fromCamelCase(n,"-")),i),r.set("-".concat(c.fromCamelCase(n,"-")),i)}}))):r=u.create();return r},y=function(e){return g().has(e)},_=function(e,t){return g().get(e)||t},m=function(e){return h?a.undefinedToNull(f.env[e.toUpperCase()]):a.undefinedToNull(s.varStorage.getItem(e))},k=function(e){return g().get("--"+e)||m(e)},w=function(e){return y("--"+e)||null!==m(e)},x=w("production"),b=h&&l.isOneOf(void 0,["true","1","2"]),S=!y("no-colors")&&(!h||f.stdout.isTTY||b)&&(!h||y("color")||b||null!==m("COLORTERM")||(m("TERM")||"").includes("color"))},{"@swc/helpers/_/_sliced_to_array":"gC503","2cfb8bcef1022e2a":"fIjC9","./map.js":"h1wtE","./string.js":"iUpUb","./conditions.js":"d85ii","./storage.js":"a7r95","./function.js":"hHL2r","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],fIjC9:[function(e,t,n){var r,i,o,u=t.exports={};function c(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===c||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:c}catch(e){r=c}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l=[],f=!1,h=-1;function d(){f&&o&&(f=!1,o.length?l=o.concat(l):h=-1,l.length&&p())}function p(){if(!f){var e=s(d);f=!0;for(var t=l.length;t;){for(o=l,l=[];++h<t;)o&&o[h].run();h=-1,t=l.length}o=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function g(){}u.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new v(e,t)),1!==l.length||f||s(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=g,u.addListener=g,u.once=g,u.off=g,u.removeListener=g,u.removeAllListeners=g,u.emit=g,u.prependListener=g,u.prependOnceListener=g,u.listeners=function(e){return[]},u.binding=function(e){throw Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],d85ii:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"undefinedToNull",(function(){return i}));var i=function(e){return void 0===e?null:e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],a7r95:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"varStorage",(function(){return a})),r.export(n,"onChange",(function(){return s})),r.export(n,"offChange",(function(){return l}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=new(function(){function e(){(0,i._)(this,e),this.map=new Map}return(0,o._)(e,[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}]),e}()),c=!0;try{"undefined"!=typeof localStorage&&(u=localStorage,c=!1)}catch(e){}var a=u,s=function(e){return c||addEventListener("storage",e)},l=function(e){return c||removeEventListener("storage",e)}},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],hHL2r:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"callAll",(function(){return c})),r.export(n,"nop",(function(){return a})),r.export(n,"apply",(function(){return s})),r.export(n,"id",(function(){return l})),r.export(n,"equalityStrict",(function(){return f})),r.export(n,"equalityFlat",(function(){return h})),r.export(n,"equalityDeep",(function(){return d})),r.export(n,"isOneOf",(function(){return p})),r.export(n,"isArray",(function(){return v})),r.export(n,"isString",(function(){return g})),r.export(n,"isNumber",(function(){return y})),r.export(n,"is",(function(){return _})),r.export(n,"isTemplate",(function(){return m}));var i=e("@swc/helpers/_/_to_consumable_array"),o=e("./array.js"),u=e("./object.js"),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n].apply(e,(0,i._)(t))}finally{n<e.length&&c(e,t,n+1)}},a=function(){},s=function(e){return e()},l=function(e){return e},f=function(e,t){return e===t},h=function(e,t){return e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(o.isArray(e)&&o.equalFlat(e,t)||"object"==typeof e&&u.equalFlat(e,t))},d=function(e,t){if(null==e||null==t)return f(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;var r=!0,i=!1,o=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done);r=!0){var s=c.value;if(!t.has(s))return!1}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}break;case Map:if(e.size!==t.size)return!1;var l=!0,h=!1,p=void 0;try{for(var v,g=e.keys()[Symbol.iterator]();!(l=(v=g.next()).done);l=!0){var y=v.value;if(!t.has(y)||!d(e.get(y),t.get(y)))return!1}}catch(e){h=!0,p=e}finally{try{l||null==g.return||g.return()}finally{if(h)throw p}}break;case Object:if(u.length(e)!==u.length(t))return!1;for(var _ in e)if(!u.hasProperty(e,_)||!d(e[_],t[_]))return!1;break;case Array:if(e.length!==t.length)return!1;for(var m=0;m<e.length;m++)if(!d(e[m],t[m]))return!1;break;default:return!1}return!0},p=function(e,t){return t.includes(e)},v=o.isArray,g=function(e){return e&&e.constructor===String},y=function(e){return null!=e&&e.constructor===Number},_=function(e,t){return e&&e.constructor===t},m=function(e){return function(t){return t&&t.constructor===e}}},{"@swc/helpers/_/_to_consumable_array":"cs7QR","./array.js":"2z4Xy","./object.js":"gI02x","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],gI02x:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"create",(function(){return i})),r.export(n,"assign",(function(){return o})),r.export(n,"keys",(function(){return u})),r.export(n,"forEach",(function(){return c})),r.export(n,"map",(function(){return a})),r.export(n,"length",(function(){return s})),r.export(n,"some",(function(){return l})),r.export(n,"isEmpty",(function(){return f})),r.export(n,"every",(function(){return h})),r.export(n,"hasProperty",(function(){return d})),r.export(n,"equalFlat",(function(){return p}));var i=function(){return Object.create(null)},o=Object.assign,u=Object.keys,c=function(e,t){for(var n in e)t(e[n],n)},a=function(e,t){var n=[];for(var r in e)n.push(t(e[r],r));return n},s=function(e){return u(e).length},l=function(e,t){for(var n in e)if(t(e[n],n))return!0;return!1},f=function(e){for(var t in e)return!1;return!0},h=function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0},d=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p=function(e,t){return e===t||s(e)===s(t)&&h(e,(function(e,n){return(void 0!==e||d(t,n))&&t[n]===e}))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"5BDqt":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"Decoder",(function(){return y})),r.export(n,"createDecoder",(function(){return _})),r.export(n,"hasContent",(function(){return m})),r.export(n,"clone",(function(){return k})),r.export(n,"readUint8Array",(function(){return w})),r.export(n,"readVarUint8Array",(function(){return x})),r.export(n,"readTailAsUint8Array",(function(){return b})),r.export(n,"skip8",(function(){return S})),r.export(n,"readUint8",(function(){return E})),r.export(n,"readUint16",(function(){return I})),r.export(n,"readUint32",(function(){return U})),r.export(n,"readUint32BigEndian",(function(){return j})),r.export(n,"peekUint8",(function(){return T})),r.export(n,"peekUint16",(function(){return C})),r.export(n,"peekUint32",(function(){return D})),r.export(n,"readVarUint",(function(){return A})),r.export(n,"readVarInt",(function(){return N})),r.export(n,"peekVarUint",(function(){return O})),r.export(n,"peekVarInt",(function(){return B})),r.export(n,"_readVarStringPolyfill",(function(){return V})),r.export(n,"_readVarStringNative",(function(){return M})),r.export(n,"readVarString",(function(){return R})),r.export(n,"readTerminatedUint8Array",(function(){return F})),r.export(n,"readTerminatedString",(function(){return L})),r.export(n,"peekVarString",(function(){return P})),r.export(n,"readFromDataView",(function(){return z})),r.export(n,"readFloat32",(function(){return q})),r.export(n,"readFloat64",(function(){return J})),r.export(n,"readBigInt64",(function(){return G})),r.export(n,"readBigUint64",(function(){return H})),r.export(n,"readAny",(function(){return K})),r.export(n,"RleDecoder",(function(){return Y})),r.export(n,"IntDiffDecoder",(function(){return W})),r.export(n,"RleIntDiffDecoder",(function(){return Q})),r.export(n,"UintOptRleDecoder",(function(){return Z})),r.export(n,"IncUintOptRleDecoder",(function(){return $})),r.export(n,"IntDiffOptRleDecoder",(function(){return ee})),r.export(n,"StringDecoder",(function(){return te}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=e("@swc/helpers/_/_inherits"),c=e("@swc/helpers/_/_create_super"),a=e("./buffer.js"),s=e("./binary.js"),l=e("./math.js"),f=e("./number.js"),h=e("./string.js"),d=e("./error.js"),p=e("./encoding.js"),v=d.create("Unexpected end of array"),g=d.create("Integer out of Range"),y=function e(t){(0,i._)(this,e),this.arr=t,this.pos=0},_=function(e){return new y(e)},m=function(e){return e.pos!==e.arr.length},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pos,n=_(e.arr);return n.pos=t,n},w=function(e,t){var n=a.createUint8ArrayViewFromArrayBuffer(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},x=function(e){return w(e,A(e))},b=function(e){return w(e,e.arr.length-e.pos)},S=function(e){return e.pos++},E=function(e){return e.arr[e.pos++]},I=function(e){var t=e.arr[e.pos]+(e.arr[e.pos+1]<<8);return e.pos+=2,t},U=function(e){var t=e.arr[e.pos]+(e.arr[e.pos+1]<<8)+(e.arr[e.pos+2]<<16)+(e.arr[e.pos+3]<<24)>>>0;return e.pos+=4,t},j=function(e){var t=e.arr[e.pos+3]+(e.arr[e.pos+2]<<8)+(e.arr[e.pos+1]<<16)+(e.arr[e.pos]<<24)>>>0;return e.pos+=4,t},T=function(e){return e.arr[e.pos]},C=function(e){return e.arr[e.pos]+(e.arr[e.pos+1]<<8)},D=function(e){return e.arr[e.pos]+(e.arr[e.pos+1]<<8)+(e.arr[e.pos+2]<<16)+(e.arr[e.pos+3]<<24)>>>0},A=function(e){for(var t=0,n=1,r=e.arr.length;e.pos<r;){var i=e.arr[e.pos++];if(t+=(i&s.BITS7)*n,n*=128,i<s.BIT8)return t;if(t>f.MAX_SAFE_INTEGER)throw g}throw v},N=function(e){var t=e.arr[e.pos++],n=t&s.BITS6,r=64,i=(t&s.BIT7)>0?-1:1;if(0==(t&s.BIT8))return i*n;for(var o=e.arr.length;e.pos<o;){if(n+=((t=e.arr[e.pos++])&s.BITS7)*r,r*=128,t<s.BIT8)return i*n;if(n>f.MAX_SAFE_INTEGER)throw g}throw v},O=function(e){var t=e.pos,n=A(e);return e.pos=t,n},B=function(e){var t=e.pos,n=N(e);return e.pos=t,n},V=function(e){var t=A(e);if(0===t)return"";var n=String.fromCodePoint(E(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(E(e));else for(;t>0;){var r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))},M=function(e){return h.utf8TextDecoder.decode(x(e))},R=h.utf8TextDecoder?M:V,F=function(e){for(var t,n=p.createEncoder();;){if(0===(t=E(e)))return p.toUint8Array(n);1===t&&(t=E(e)),p.write(n,t)}},L=function(e){return h.decodeUtf8(F(e))},P=function(e){var t=e.pos,n=R(e);return e.pos=t,n},z=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},q=function(e){return z(e,4).getFloat32(0,!1)},J=function(e){return z(e,8).getFloat64(0,!1)},G=function(e){return z(e,8).getBigInt64(0,!1)},H=function(e){return z(e,8).getBigUint64(0,!1)},X=[function(e){},function(e){return null},N,q,J,G,function(e){return!1},function(e){return!0},R,function(e){for(var t=A(e),n={},r=0;r<t;r++)n[R(e)]=K(e);return n},function(e){for(var t=A(e),n=[],r=0;r<t;r++)n.push(K(e));return n},x],K=function(e){return X[127-E(e)](e)},Y=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e,r){var o;return(0,i._)(this,n),(o=t.call(this,e)).reader=r,o.s=null,o.count=0,o}return(0,o._)(n,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),m(this)?this.count=A(this)+1:this.count=-1),this.count--,this.s}}]),n}(y),W=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e,r){var o;return(0,i._)(this,n),(o=t.call(this,e)).s=r,o}return(0,o._)(n,[{key:"read",value:function(){return this.s+=N(this),this.s}}]),n}(y),Q=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e,r){var o;return(0,i._)(this,n),(o=t.call(this,e)).s=r,o.count=0,o}return(0,o._)(n,[{key:"read",value:function(){return 0===this.count&&(this.s+=N(this),m(this)?this.count=A(this)+1:this.count=-1),this.count--,this.s}}]),n}(y),Z=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e){var r;return(0,i._)(this,n),(r=t.call(this,e)).s=0,r.count=0,r}return(0,o._)(n,[{key:"read",value:function(){if(0===this.count){this.s=N(this);var e=l.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=A(this)+2)}return this.count--,this.s}}]),n}(y),$=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e){var r;return(0,i._)(this,n),(r=t.call(this,e)).s=0,r.count=0,r}return(0,o._)(n,[{key:"read",value:function(){if(0===this.count){this.s=N(this);var e=l.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=A(this)+2)}return this.count--,this.s++}}]),n}(y),ee=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e){var r;return(0,i._)(this,n),(r=t.call(this,e)).s=0,r.count=0,r.diff=0,r}return(0,o._)(n,[{key:"read",value:function(){if(0===this.count){var e=N(this),t=1&e;this.diff=l.floor(e/2),this.count=1,t&&(this.count=A(this)+2)}return this.s+=this.diff,this.count--,this.s}}]),n}(y),te=function(){function e(t){(0,i._)(this,e),this.decoder=new Z(t),this.str=R(this.decoder),this.spos=0}return(0,o._)(e,[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}]),e}()},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_inherits":"cPJNz","@swc/helpers/_/_create_super":"4oibw","./buffer.js":"2Sa2X","./binary.js":"i2nVL","./math.js":"MxBNi","./number.js":"jakRM","./string.js":"iUpUb","./error.js":"f7uYS","./encoding.js":"krt44","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],i2nVL:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"BIT1",(function(){return i})),r.export(n,"BIT2",(function(){return o})),r.export(n,"BIT3",(function(){return u})),r.export(n,"BIT4",(function(){return c})),r.export(n,"BIT5",(function(){return a})),r.export(n,"BIT6",(function(){return s})),r.export(n,"BIT7",(function(){return l})),r.export(n,"BIT8",(function(){return f})),r.export(n,"BIT9",(function(){return h})),r.export(n,"BIT10",(function(){return d})),r.export(n,"BIT11",(function(){return p})),r.export(n,"BIT12",(function(){return v})),r.export(n,"BIT13",(function(){return g})),r.export(n,"BIT14",(function(){return y})),r.export(n,"BIT15",(function(){return _})),r.export(n,"BIT16",(function(){return m})),r.export(n,"BIT17",(function(){return k})),r.export(n,"BIT18",(function(){return w})),r.export(n,"BIT19",(function(){return x})),r.export(n,"BIT20",(function(){return b})),r.export(n,"BIT21",(function(){return S})),r.export(n,"BIT22",(function(){return E})),r.export(n,"BIT23",(function(){return I})),r.export(n,"BIT24",(function(){return U})),r.export(n,"BIT25",(function(){return j})),r.export(n,"BIT26",(function(){return T})),r.export(n,"BIT27",(function(){return C})),r.export(n,"BIT28",(function(){return D})),r.export(n,"BIT29",(function(){return A})),r.export(n,"BIT30",(function(){return N})),r.export(n,"BIT31",(function(){return O})),r.export(n,"BIT32",(function(){return B})),r.export(n,"BITS0",(function(){return V})),r.export(n,"BITS1",(function(){return M})),r.export(n,"BITS2",(function(){return R})),r.export(n,"BITS3",(function(){return F})),r.export(n,"BITS4",(function(){return L})),r.export(n,"BITS5",(function(){return P})),r.export(n,"BITS6",(function(){return z})),r.export(n,"BITS7",(function(){return q})),r.export(n,"BITS8",(function(){return J})),r.export(n,"BITS9",(function(){return G})),r.export(n,"BITS10",(function(){return H})),r.export(n,"BITS11",(function(){return X})),r.export(n,"BITS12",(function(){return K})),r.export(n,"BITS13",(function(){return Y})),r.export(n,"BITS14",(function(){return W})),r.export(n,"BITS15",(function(){return Q})),r.export(n,"BITS16",(function(){return Z})),r.export(n,"BITS17",(function(){return $})),r.export(n,"BITS18",(function(){return ee})),r.export(n,"BITS19",(function(){return te})),r.export(n,"BITS20",(function(){return ne})),r.export(n,"BITS21",(function(){return re})),r.export(n,"BITS22",(function(){return ie})),r.export(n,"BITS23",(function(){return oe})),r.export(n,"BITS24",(function(){return ue})),r.export(n,"BITS25",(function(){return ce})),r.export(n,"BITS26",(function(){return ae})),r.export(n,"BITS27",(function(){return se})),r.export(n,"BITS28",(function(){return le})),r.export(n,"BITS29",(function(){return fe})),r.export(n,"BITS30",(function(){return he})),r.export(n,"BITS31",(function(){return de})),r.export(n,"BITS32",(function(){return pe}));var i=1,o=2,u=4,c=8,a=16,s=32,l=64,f=128,h=256,d=512,p=1024,v=2048,g=4096,y=8192,_=16384,m=32768,k=65536,w=131072,x=262144,b=524288,S=1048576,E=2097152,I=4194304,U=8388608,j=16777216,T=33554432,C=67108864,D=134217728,A=268435456,N=536870912,O=1073741824,B=-2147483648,V=0,M=1,R=3,F=7,L=15,P=31,z=63,q=127,J=255,G=511,H=1023,X=2047,K=4095,Y=8191,W=16383,Q=32767,Z=65535,$=131071,ee=262143,te=524287,ne=1048575,re=2097151,ie=4194303,oe=8388607,ue=16777215,ce=33554431,ae=67108863,se=134217727,le=268435455,fe=536870911,he=1073741823,de=2147483647,pe=4294967295},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],jakRM:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"MAX_SAFE_INTEGER",(function(){return u})),r.export(n,"MIN_SAFE_INTEGER",(function(){return c})),r.export(n,"LOWEST_INT32",(function(){return a})),r.export(n,"HIGHEST_INT32",(function(){return s})),r.export(n,"HIGHEST_UINT32",(function(){return l})),r.export(n,"isInteger",(function(){return f})),r.export(n,"isNaN",(function(){return h})),r.export(n,"parseInt",(function(){return d})),r.export(n,"countBits",(function(){return p}));var i=e("./math.js"),o=e("./binary.js"),u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,a=-2147483648,s=o.BITS31,l=o.BITS32,f=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&i.floor(e)===e},h=Number.isNaN,d=Number.parseInt,p=function(e){e&=o.BITS32;for(var t=0;e;)e&=e-1,t++;return t}},{"./math.js":"MxBNi","./binary.js":"i2nVL","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],f7uYS:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"create",(function(){return i})),r.export(n,"methodUnimplemented",(function(){return o})),r.export(n,"unexpectedCase",(function(){return u}));var i=function(e){return Error(e)},o=function(){throw i("Method unimplemented")},u=function(){throw i("Unexpected case")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],l8Gr3:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"rand",(function(){return c})),r.export(n,"uint32",(function(){return a})),r.export(n,"uint53",(function(){return s})),r.export(n,"oneOf",(function(){return l})),r.export(n,"uuidv4",(function(){return f}));var i=e("./math.js"),o=e("./binary.js"),u=e("lib0/webcrypto"),c=Math.random,a=function(){return(0,u.getRandomValues)(new Uint32Array(1))[0]},s=function(){var e=(0,u.getRandomValues)(new Uint32Array(8));return(e[0]&o.BITS21)*(o.BITS32+1)+(e[1]>>>0)},l=function(e){return e[i.floor(c()*e.length)]},f=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(e^a()&15>>e/4).toString(16)}))}},{"./math.js":"MxBNi","./binary.js":"i2nVL","lib0/webcrypto":"x3YaC","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],x3YaC:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"subtle",(function(){return i})),r.export(n,"getRandomValues",(function(){return o}));var i=crypto.subtle,o=crypto.getRandomValues.bind(crypto)},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],k2SDl:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"create",(function(){return o})),r.export(n,"createEmpty",(function(){return u})),r.export(n,"all",(function(){return c})),r.export(n,"reject",(function(){return a})),r.export(n,"resolve",(function(){return s})),r.export(n,"resolveWith",(function(){return l})),r.export(n,"until",(function(){return f})),r.export(n,"wait",(function(){return h})),r.export(n,"isPromise",(function(){return d}));var i=e("./time.js"),o=function(e){return new Promise(e)},u=function(e){return new Promise(e)},c=Promise.all.bind(Promise),a=function(e){return Promise.reject(e)},s=function(e){return Promise.resolve(e)},l=function(e){return Promise.resolve(e)},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return o((function(r,o){var u=i.getUnixTime(),c=e>0,a=setInterval((function(){t()?(clearInterval(a),r()):c&&i.getUnixTime()-u>e&&(clearInterval(a),o(Error("Timeout")))}),n)}))},h=function(e){return o((function(t,n){return setTimeout(t,e)}))},d=function(e){return e instanceof Promise||e&&e.then&&e.catch&&e.finally}},{"./time.js":"anuek","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],anuek:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"getDate",(function(){return u})),r.export(n,"getUnixTime",(function(){return c})),r.export(n,"humanizeDuration",(function(){return a}));var i=e("./metric.js"),o=e("./math.js"),u=function(){return new Date},c=Date.now,a=function(e){if(e<6e4){var t=i.prefix(e,-1);return o.round(100*t.n)/100+t.prefix+"s"}var n=(e=o.floor(e/1e3))%60,r=o.floor(e/60)%60,u=o.floor(e/3600)%24,c=o.floor(e/86400);return c>0?c+"d"+(u>0||r>30?" "+(r>30?u+1:u)+"h":""):u>0?u+"h"+(r>0||n>30?" "+(n>30?r+1:r)+"min":""):r+"min"+(n>0?" "+n+"s":"")}},{"./metric.js":"6zGGV","./math.js":"MxBNi","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"6zGGV":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"yotta",(function(){return o})),r.export(n,"zetta",(function(){return u})),r.export(n,"exa",(function(){return c})),r.export(n,"peta",(function(){return a})),r.export(n,"tera",(function(){return s})),r.export(n,"giga",(function(){return l})),r.export(n,"mega",(function(){return f})),r.export(n,"kilo",(function(){return h})),r.export(n,"hecto",(function(){return d})),r.export(n,"deca",(function(){return p})),r.export(n,"deci",(function(){return v})),r.export(n,"centi",(function(){return g})),r.export(n,"milli",(function(){return y})),r.export(n,"micro",(function(){return _})),r.export(n,"nano",(function(){return m})),r.export(n,"pico",(function(){return k})),r.export(n,"femto",(function(){return w})),r.export(n,"atto",(function(){return x})),r.export(n,"zepto",(function(){return b})),r.export(n,"yocto",(function(){return S})),r.export(n,"prefix",(function(){return U}));var i=e("./math.js"),o=1e24,u=1e21,c=1e18,a=1e15,s=1e12,l=1e9,f=1e6,h=1e3,d=100,p=10,v=.1,g=.01,y=.001,_=1e-6,m=1e-9,k=1e-12,w=1e-15,x=1e-18,b=1e-21,S=1e-24,E=["","k","M","G","T","P","E","Z","Y"],I=["","m","","n","p","f","a","z","y"],U=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0===e?0:i.log10(e),r=0;n<3*r&&t>-8;)t--,r--;for(;n>=3+3*r&&t<8;)t++,r++;var o=t<0?I[-t]:E[t];return{n:i.round(1e12*(r>0?e/i.exp10(3*r):e*i.exp10(-3*r)))/1e12,prefix:o}}},{"./math.js":"MxBNi","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],lLXz8:[function(e,t,n){var r,i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"BOLD",(function(){return y.BOLD})),i.export(n,"UNBOLD",(function(){return y.UNBOLD})),i.export(n,"BLUE",(function(){return y.BLUE})),i.export(n,"GREY",(function(){return y.GREY})),i.export(n,"GREEN",(function(){return y.GREEN})),i.export(n,"RED",(function(){return y.RED})),i.export(n,"PURPLE",(function(){return y.PURPLE})),i.export(n,"ORANGE",(function(){return y.ORANGE})),i.export(n,"UNCOLOR",(function(){return y.UNCOLOR})),i.export(n,"print",(function(){return k})),i.export(n,"warn",(function(){return w})),i.export(n,"printError",(function(){return x})),i.export(n,"printImg",(function(){return b})),i.export(n,"printImgBase64",(function(){return S})),i.export(n,"group",(function(){return E})),i.export(n,"groupCollapsed",(function(){return I})),i.export(n,"groupEnd",(function(){return U})),i.export(n,"printDom",(function(){return j})),i.export(n,"printCanvas",(function(){return T})),i.export(n,"vconsoles",(function(){return C})),i.export(n,"VConsole",(function(){return N})),i.export(n,"createVConsole",(function(){return O})),i.export(n,"createModuleLogger",(function(){return B}));var o=e("@swc/helpers/_/_class_call_check"),u=e("@swc/helpers/_/_create_class"),c=e("@swc/helpers/_/_define_property"),a=e("@swc/helpers/_/_to_consumable_array"),s=e("./environment.js"),l=e("./set.js"),f=e("./pair.js"),h=e("./dom.js"),d=e("./json.js"),p=e("./map.js"),v=e("./eventloop.js"),g=e("./math.js"),y=e("./logging.common.js"),_=(r={},(0,c._)(r,y.BOLD,f.create("font-weight","bold")),(0,c._)(r,y.UNBOLD,f.create("font-weight","normal")),(0,c._)(r,y.BLUE,f.create("color","blue")),(0,c._)(r,y.GREEN,f.create("color","green")),(0,c._)(r,y.GREY,f.create("color","grey")),(0,c._)(r,y.RED,f.create("color","red")),(0,c._)(r,y.PURPLE,f.create("color","purple")),(0,c._)(r,y.ORANGE,f.create("color","orange")),(0,c._)(r,y.UNCOLOR,f.create("color","black")),r),m=s.supportsColor?function(e){for(var t=[],n=[],r=p.create(),i=[],o=0;o<e.length;o++){var u=e[o],c=_[u];if(void 0!==c)r.set(c.left,c.right);else{if(u.constructor!==String&&u.constructor!==Number)break;var a=h.mapToStyleString(r);o>0||a.length>0?(t.push("%c"+u),n.push(a)):t.push(u)}}for(o>0&&(i=n).unshift(t.join(""));o<e.length;o++){var s=e[o];s instanceof Symbol||i.push(s)}return i}:y.computeNoColorLoggingArgs,k=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,(0,a._)(m(n))),C.forEach((function(e){return e.print(n)}))},w=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,(0,a._)(m(n))),n.unshift(y.ORANGE),C.forEach((function(e){return e.print(n)}))},x=function(e){console.error(e),C.forEach((function(t){return t.printError(e)}))},b=function(e,t){s.isBrowser&&console.log("%c                      ","font-size: ".concat(t,"px; background-size: contain; background-repeat: no-repeat; background-image: url(").concat(e,")")),C.forEach((function(n){return n.printImg(e,t)}))},S=function(e,t){return b("data:image/gif;base64,".concat(e),t)},E=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).group.apply(e,(0,a._)(m(n))),C.forEach((function(e){return e.group(n)}))},I=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).groupCollapsed.apply(e,(0,a._)(m(n))),C.forEach((function(e){return e.groupCollapsed(n)}))},U=function(){console.groupEnd(),C.forEach((function(e){return e.groupEnd()}))},j=function(e){return C.forEach((function(t){return t.printDom(e())}))},T=function(e,t){return b(e.toDataURL(),t)},C=l.create(),D=function(e){for(var t=[],n=new Map,r=0;r<e.length;r++){var i=e[r],o=_[i];if(void 0!==o)n.set(o.left,o.right);else{if(i.constructor!==String&&i.constructor!==Number)break;var u=h.element("span",[f.create("style",h.mapToStyleString(n))],[h.text(i.toString())]);""===u.innerHTML&&(u.innerHTML="&nbsp;"),t.push(u)}}for(;r<e.length;r++){var c=e[r];c instanceof Symbol||(c.constructor!==String&&c.constructor!==Number&&(c=" "+d.stringify(c)+" "),t.push(h.element("span",[],[h.text(c)])))}return t},A="font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;",N=function(){function e(t){(0,o._)(this,e),this.dom=t,this.ccontainer=this.dom,this.depth=0,C.add(this)}return(0,u._)(e,[{key:"group",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;v.enqueue((function(){var r=h.element("span",[f.create("hidden",t),f.create("style","color:grey;font-size:120%;")],[h.text("")]),i=h.element("span",[f.create("hidden",!t),f.create("style","color:grey;font-size:125%;")],[h.text("")]),o=h.element("div",[f.create("style","".concat(A,";padding-left:").concat(10*n.depth,"px"))],[r,i,h.text(" ")].concat(D(e))),u=h.element("div",[f.create("hidden",t)]),c=h.element("div",[],[o,u]);h.append(n.ccontainer,[c]),n.ccontainer=u,n.depth++,h.addEventListener(o,"click",(function(e){u.toggleAttribute("hidden"),r.toggleAttribute("hidden"),i.toggleAttribute("hidden")}))}))}},{key:"groupCollapsed",value:function(e){this.group(e,!0)}},{key:"groupEnd",value:function(){var e=this;v.enqueue((function(){e.depth>0&&(e.depth--,e.ccontainer=e.ccontainer.parentElement.parentElement)}))}},{key:"print",value:function(e){var t=this;v.enqueue((function(){h.append(t.ccontainer,[h.element("div",[f.create("style","".concat(A,";padding-left:").concat(10*t.depth,"px"))],D(e))])}))}},{key:"printError",value:function(e){this.print([y.RED,y.BOLD,e.toString()])}},{key:"printImg",value:function(e,t){var n=this;v.enqueue((function(){h.append(n.ccontainer,[h.element("img",[f.create("src",e),f.create("height","".concat(g.round(1.5*t),"px"))])])}))}},{key:"printDom",value:function(e){var t=this;v.enqueue((function(){h.append(t.ccontainer,[e])}))}},{key:"destroy",value:function(){var e=this;v.enqueue((function(){C.delete(e)}))}}]),e}(),O=function(e){return new N(e)},B=function(e){return y.createModuleLogger(k,e)}},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_define_property":"ikzUS","@swc/helpers/_/_to_consumable_array":"cs7QR","./environment.js":"aLHxR","./set.js":"3a4aw","./pair.js":"hMRYo","./dom.js":"gqQRE","./json.js":"5nPlT","./map.js":"h1wtE","./eventloop.js":"5CPaJ","./math.js":"MxBNi","./logging.common.js":"iI340","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],hMRYo:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"Pair",(function(){return o})),r.export(n,"create",(function(){return u})),r.export(n,"createReversed",(function(){return c})),r.export(n,"forEach",(function(){return a})),r.export(n,"map",(function(){return s}));var i=e("@swc/helpers/_/_class_call_check"),o=function e(t,n){(0,i._)(this,e),this.left=t,this.right=n},u=function(e,t){return new o(e,t)},c=function(e,t){return new o(t,e)},a=function(e,t){return e.forEach((function(e){return t(e.left,e.right)}))},s=function(e,t){return e.map((function(e){return t(e.left,e.right)}))}},{"@swc/helpers/_/_class_call_check":"aKk2j","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],gqQRE:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"doc",(function(){return u})),r.export(n,"createElement",(function(){return c})),r.export(n,"createDocumentFragment",(function(){return a})),r.export(n,"createTextNode",(function(){return s})),r.export(n,"domParser",(function(){return l})),r.export(n,"emitCustomEvent",(function(){return f})),r.export(n,"setAttributes",(function(){return h})),r.export(n,"setAttributesMap",(function(){return d})),r.export(n,"fragment",(function(){return p})),r.export(n,"append",(function(){return v})),r.export(n,"remove",(function(){return g})),r.export(n,"addEventListener",(function(){return y})),r.export(n,"removeEventListener",(function(){return _})),r.export(n,"addEventListeners",(function(){return m})),r.export(n,"removeEventListeners",(function(){return k})),r.export(n,"element",(function(){return w})),r.export(n,"canvas",(function(){return x})),r.export(n,"text",(function(){return b})),r.export(n,"pairToStyleString",(function(){return S})),r.export(n,"pairsToStyleString",(function(){return E})),r.export(n,"mapToStyleString",(function(){return I})),r.export(n,"querySelector",(function(){return U})),r.export(n,"querySelectorAll",(function(){return j})),r.export(n,"getElementById",(function(){return T})),r.export(n,"parseFragment",(function(){return D})),r.export(n,"parseElement",(function(){return A})),r.export(n,"replaceWith",(function(){return N})),r.export(n,"insertBefore",(function(){return O})),r.export(n,"appendChild",(function(){return B})),r.export(n,"ELEMENT_NODE",(function(){return V})),r.export(n,"TEXT_NODE",(function(){return M})),r.export(n,"CDATA_SECTION_NODE",(function(){return R})),r.export(n,"COMMENT_NODE",(function(){return F})),r.export(n,"DOCUMENT_NODE",(function(){return L})),r.export(n,"DOCUMENT_TYPE_NODE",(function(){return P})),r.export(n,"DOCUMENT_FRAGMENT_NODE",(function(){return z})),r.export(n,"checkNodeType",(function(){return q})),r.export(n,"isParentOf",(function(){return J}));var i=e("./pair.js"),o=e("./map.js"),u="undefined"!=typeof document?document:{},c=function(e){return u.createElement(e)},a=function(){return u.createDocumentFragment()},s=function(e){return u.createTextNode(e)},l="undefined"!=typeof DOMParser?new DOMParser:null,f=function(e,t,n){return e.dispatchEvent(new CustomEvent(t,n))},h=function(e,t){return i.forEach(t,(function(t,n){!1===n?e.removeAttribute(t):!0===n?e.setAttribute(t,""):e.setAttribute(t,n)})),e},d=function(e,t){return t.forEach((function(t,n){e.setAttribute(n,t)})),e},p=function(e){for(var t=a(),n=0;n<e.length;n++)B(t,e[n]);return t},v=function(e,t){return B(e,p(t)),e},g=function(e){return e.remove()},y=function(e,t,n){return e.addEventListener(t,n)},_=function(e,t,n){return e.removeEventListener(t,n)},m=function(e,t){return i.forEach(t,(function(t,n){return y(e,t,n)})),e},k=function(e,t){return i.forEach(t,(function(t,n){return _(e,t,n)})),e},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return v(h(c(e),t),n)},x=function(e,t){var n=c("canvas");return n.height=t,n.width=e,n},b=s,S=function(e){return"".concat(e.left,":").concat(e.right,";")},E=function(e){return e.map(S).join("")},I=function(e){return o.map(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")},U=function(e,t){return e.querySelector(t)},j=function(e,t){return e.querySelectorAll(t)},T=function(e){return u.getElementById(e)},C=function(e){return l.parseFromString("<html><body>".concat(e,"</body></html>"),"text/html").body},D=function(e){return p(C(e).childNodes)},A=function(e){return C(e).firstElementChild},N=function(e,t){return e.replaceWith(t)},O=function(e,t,n){return e.insertBefore(t,n)},B=function(e,t){return e.appendChild(t)},V=u.ELEMENT_NODE,M=u.TEXT_NODE,R=u.CDATA_SECTION_NODE,F=u.COMMENT_NODE,L=u.DOCUMENT_NODE,P=u.DOCUMENT_TYPE_NODE,z=u.DOCUMENT_FRAGMENT_NODE,q=function(e,t){return e.nodeType===t},J=function(e,t){for(var n=t.parentNode;n&&n!==e;)n=n.parentNode;return n===e}},{"./pair.js":"hMRYo","./map.js":"h1wtE","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"5nPlT":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"stringify",(function(){return i})),r.export(n,"parse",(function(){return o}));var i=JSON.stringify,o=JSON.parse},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"5CPaJ":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"enqueue",(function(){return a})),r.export(n,"timeout",(function(){return f})),r.export(n,"interval",(function(){return d})),r.export(n,"Animation",(function(){return p})),r.export(n,"animationFrame",(function(){return v})),r.export(n,"idleCallback",(function(){return y})),r.export(n,"createDebouncer",(function(){return _}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=[],c=function(){for(var e=0;e<u.length;e++)u[e]();u=[]},a=function(e){u.push(e),1===u.length&&setTimeout(c,0)},s=function(e){return function(){function t(e){(0,i._)(this,t),this._=e}return(0,o._)(t,[{key:"destroy",value:function(){e(this._)}}]),t}()},l=s(clearTimeout),f=function(e,t){return new l(setTimeout(t,e))},h=s(clearInterval),d=function(e,t){return new h(setInterval(t,e))},p=s((function(e){return"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)})),v=function(e){return"undefined"==typeof requestAnimationFrame?f(0,e):new p(requestAnimationFrame(e))},g=s((function(e){return"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)})),y=function(e){return"undefined"!=typeof requestIdleCallback?new g(requestIdleCallback(e)):f(1e3,e)},_=function(e){var t=-1;return function(n){clearTimeout(t),n&&(t=setTimeout(n,e))}}},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],iI340:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"BOLD",(function(){return l})),r.export(n,"UNBOLD",(function(){return f})),r.export(n,"BLUE",(function(){return h})),r.export(n,"GREY",(function(){return d})),r.export(n,"GREEN",(function(){return p})),r.export(n,"RED",(function(){return v})),r.export(n,"PURPLE",(function(){return g})),r.export(n,"ORANGE",(function(){return y})),r.export(n,"UNCOLOR",(function(){return _})),r.export(n,"computeNoColorLoggingArgs",(function(){return m})),r.export(n,"createModuleLogger",(function(){return b}));var i=e("@swc/helpers/_/_to_consumable_array"),o=e("@swc/helpers/_/_type_of"),u=e("./symbol.js"),c=e("./time.js"),a=e("./environment.js"),s=e("./function.js"),l=u.create(),f=u.create(),h=u.create(),d=u.create(),p=u.create(),v=u.create(),g=u.create(),y=u.create(),_=u.create(),m=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},k=[p,g,y,h],w=0,x=c.getUnixTime(),b=function(e,t){var n=k[w],r=a.getVariable("log"),u=null!==r&&("*"===r||"true"===r||RegExp(r,"gi").test(t));return w=(w+1)%k.length,t+=": ",u?function(){for(var r=arguments.length,u=Array(r),a=0;a<r;a++)u[a]=arguments[a];var s=c.getUnixTime(),l=s-x;x=s,e.apply(void 0,[n,t,_].concat((0,i._)(u.map((function(e){return"string"==typeof e||"symbol"===(void 0===e?"undefined":(0,o._)(e))?e:JSON.stringify(e)}))),[n," +"+l+"ms"]))}:s.nop}},{"@swc/helpers/_/_to_consumable_array":"cs7QR","@swc/helpers/_/_type_of":"jO300","./symbol.js":"2QjPK","./time.js":"anuek","./environment.js":"aLHxR","./function.js":"hHL2r","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"2QjPK":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"create",(function(){return o})),r.export(n,"isSymbol",(function(){return u}));var i=e("@swc/helpers/_/_type_of"),o=Symbol,u=function(e){return"symbol"===(void 0===e?"undefined":(0,i._)(e))}},{"@swc/helpers/_/_type_of":"jO300","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],e8ara:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"mapIterator",(function(){return o})),r.export(n,"createIterator",(function(){return u})),r.export(n,"iteratorFilter",(function(){return c})),r.export(n,"iteratorMap",(function(){return a}));var i=e("@swc/helpers/_/_define_property"),o=function(e,t){var n;return n={},(0,i._)(n,Symbol.iterator,(function(){return this})),(0,i._)(n,"next",(function(){var n=e.next();return{value:n.done?void 0:t(n.value),done:n.done}})),n},u=function(e){var t;return t={},(0,i._)(t,Symbol.iterator,(function(){return this})),(0,i._)(t,"next",e),t},c=function(e,t){return u((function(){var n;do{n=e.next()}while(!n.done&&!t(n.value));return n}))},a=function(e,t){return u((function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t(i)}}))}},{"@swc/helpers/_/_define_property":"ikzUS","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"9T12E":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"YKeyValue",(function(){return a}));var i=e("@swc/helpers/_/_class_call_check"),o=e("@swc/helpers/_/_create_class"),u=e("@swc/helpers/_/_inherits"),c=e("@swc/helpers/_/_create_super");e("yjs");var a=function(e){(0,u._)(n,e);var t=(0,c._)(n);function n(e){(0,i._)(this,n),(r=t.call(this)).yarray=e,r.doc=e.doc,r.map=new Map;var r,o=e.toArray();return r.doc.transact((function(){for(var t=o.length-1;t>=0;t--){var n=o[t];r.map.has(n.key)?e.delete(t):r.map.set(n.key,n)}})),e.observe((function(t,n){var i=new Map,o=Array.from(t.changes.added);t.changes.deleted.forEach((function(e){e.content.getContent().forEach((function(e){r.map.get(e.key)===e&&(r.map.delete(e.key),i.set(e.key,{action:"delete",oldValue:e.val}))}))}));var u=new Map;o.map((function(e){return e.content.getContent()})).flat().forEach((function(e){u.set(e.key,e)}));var c=new Set,a=e.toArray();r.doc.transact((function(t){for(var n=a.length-1;n>=0&&(u.size>0||c.size>0);n--){var o=a[n];if(c.has(o.key))c.delete(o.key),e.delete(n,1);else if(u.get(o.key)===o){var s=r.map.get(o.key);if(s)c.add(o.key),i.set(o.key,{action:"update",oldValue:s.val,newValue:o.val});else{var l=i.get(o.key);l&&"delete"===l.action?i.set(o.key,{action:"update",newValue:o.val,oldValue:l.oldValue}):i.set(o.key,{action:"add",newValue:o.val})}u.delete(o.key),r.map.set(o.key,o)}else u.has(o.key)&&(c.add(o.key),u.delete(o.key))}})),i.size>0&&r.emit("change",[i,n])})),r}return(0,o._)(n,[{key:"set",value:function(e,t){var n=this;this.doc.transact((function(r){n.map.has(e)&&n.delete(e),n.yarray.push([{key:e,val:t}])}))}},{key:"delete",value:function(e){var t=0,n=!0,r=!1,i=void 0;try{for(var o,u=this.yarray[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){if(o.value.key===e){this.yarray.delete(t);break}t++}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}},{key:"get",value:function(e){var t=this.map.get(e);return t&&t.val}},{key:"has",value:function(e){return this.map.has(e)}}]),n}(e("lib0/observable").Observable)},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_inherits":"cPJNz","@swc/helpers/_/_create_super":"4oibw",yjs:"i4JQM","lib0/observable":"aUaCO","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"9J4dR":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"encode",(function(){return o})),r.export(n,"decode",(function(){return c}));var i=String.fromCharCode,o=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(i(e[n]));return btoa(t.join(""))},u=function(e){return e.charCodeAt(0)},c=function(e){return Uint8Array.from(atob(e),u)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}]},[],0,"parcelRequire55a5");
